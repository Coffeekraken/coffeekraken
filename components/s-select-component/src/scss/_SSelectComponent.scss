/**
 * @name 	SSelectComponent Classes
 * This file provide the mixins to generate s-select classes
 */
%s-select {
}
%s-select__dropdown {
  // opacity:0;
  // pointer-events:none;
  // position:absolute;
  // top:100%; left:0;
  // z-index: 1;
  // width:100%;
  // height:0;
  // overflow-y: hidden;
}
%s-select__selection {
  // vertical-align: middle;
  // > * {
  // 	display:inline-block;
  // 	vertical-align: middle;
  // }
}
%s-select--dropup__dropdown {
  // top:auto; bottom:calc(#{unquote("100% + #{10px}")});
}
%s-select--opened__dropdown {
  // opacity:1;
  // pointer-events:all;
  // height:auto;
}
%s-select__search-field {
}
%s-select__options {
  // overflow-y: auto;
  // overflow-x: hidden;
  // height: 100%;
  // max-height: 100vh;
}
%s-select__option {
  // list-style: none;
  // cursor: pointer;
}
%s-select__option--disabled {
  // pointer-events: none;
}
%s-select__option--hidden {
  // display:none;
}
%s-select__selection {
}
%s-select__selection-tag {
  display: inline-block;
}
%s-select__reset {
  background-size: 100% 100%;
  background-color: transparent;
  border: none;
  position: absolute;
}
%s-select__selection-tag-close {
  background-size: 100% 100%;
}

/**
 * Provide all the classes of the s-select component for a default style
 * Styling options:
 * - ```[color="{$color}"]``` : apply a color to the select component
 * @param 		{List<Color>} 		[$colors=default primary secondary] 		The colors to generate
 * @author 		Olivier Bossel <olivier.bossel@gmail.com>
 */
@mixin s-select-classes($colors: default primary secondary) {
  @include s-select-classes-bare();
  @include s-select-classes-style($colors);
}

/**
 * Provide the bare styling for the s-select classes
 * @author 		Olivier Bossel <olivier.bossel@gmail.com>
 */
@mixin s-select-classes-bare() {
  @include s-component("s-select") {
    // silent classes
    .#{s-component()} {
      @extend %s-select !optional;
    }
    .#{s-component()}__dropdown {
      @extend %s-select__dropdown !optional;
    }
    .#{s-component()}__selection {
      @extend %s-select__selection !optional;
    }
    .#{s-component()}--dropup .#{s-component()}__dropdown {
      @extend %s-select--dropup__dropdown !optional;
    }
    .#{s-component()}--opened .#{s-component()}__dropdown {
      @extend %s-select--opened__dropdown !optional;
    }
    .#{s-component()}__options {
      @extend %s-select__options !optional;
    }
    .#{s-component()}__option {
      @extend %s-select__option !optional;
    }
    .#{s-component()}__option--disabled {
      @extend %s-select__option--disabled !optional;
      opacity: s-lnf(disabled-opacity);
    }
    .#{s-component()}__option--hidden {
      @extend %s-select__option--hidden !optional;
    }
    // #{s-component-selector('_selection {
    // 	@extend %s-select__selection;
    // }
    .#{s-component()}__selection-tag {
      @extend %s-select__selection-tag !optional;
    }
    .#{s-component()}__selection-tag-close {
      @extend %s-select__selection-tag-close !optional;
      height: 0.8em;
      width: 0.8em;
      vertical-align: middle;
      cursor: pointer;
      display: inline-block;
    }
    .#{s-component()}__reset {
      @extend %s-select__reset !optional;
      right: s-lnf(padding-vertical) * 2.5;
      top: 50%;
      transform: translateY(-50%);
      height: 1em;
      width: 1em;
      vertical-align: middle;
      cursor: pointer;
      outline: none;
      font-size: 0.8em;
    }

    // style
    .#{s-component()}__search-field {
      border-radius: s-lnf(border-radius);
      padding: s-lnf(padding-horizontal) s-lnf(padding-vertical);
    }

    .#{s-component()} {
      // @include s-input-component-select-field-bare();
      @include s-form-select-bare();
      $paddingTag: s-lnf(padding-horizontal);
      $padding: s-lnf(padding-horizontal) * 0.6;

      $h: 1em;
      &.#{s-component()}--multiple {
        transition: none;

        &:not(.#{s-component()}--placeholder) {
          padding: $padding / 2 s-lnf(padding-vertical);
          height: auto !important;
        }
      }
      .#{s-component()}__dropdown {
        border-radius: s-lnf(border-radius);
      }
      .#{s-component()}__search-container {
        padding: s-lnf(padding-horizontal);
      }
      .#{s-component()}__search-field {
        // @include s-input-component-field-size();
        @include s-form-input-bare();
        border-radius: s-lnf(border-radius);
      }
      .#{s-component()}__selection-tag {
        border-radius: s-lnf(border-radius);
        font-size: 0.9em;
        margin-right: s-lnf(padding-vertical) / 3;
        margin-top: $padding / 2;
        margin-bottom: $padding / 2;

        height: calc(#{$paddingTag} + 0.9em);
        line-height: calc(#{$paddingTag} + 0.9em + 0.1em);

        padding: 0 s-lnf(padding-vertical) / 2;
        // padding-top:calc(#{$paddingTag / 2} + .1em);
        // padding-bottom:calc(#{$paddingTag / 2} - .1em);
        position: relative;
        left: -s-lnf(padding-vertical) / 2;
      }
      .#{s-component()}__selection-tag-close {
        margin-left: s-lnf(padding-vertical) / 3;
      }
      .#{s-component()}__option:not(.#{s-component()}__option--custom),
      .#{s-component()}__optgroup:not(.#{s-component()}__optgroup--custom) {
        padding: s-lnf(padding-horizontal) s-lnf(padding-vertical);
      }
      .#{s-component()}__option--in-optgroup {
        padding-left: s-lnf(padding-vertical) * 1.5 !important;
      }
    }
  }
}

/**
 * Provide all the style classes of the s-select component for a default style
 * Styling options:
 * - ```[color="{$color}"]``` : apply a color to the select component
 * @param 		{List<Color>} 		[$colors=default primary secondary] 		The colors to generate
 * @author 		Olivier Bossel <olivier.bossel@gmail.com>
 */
@mixin s-select-classes-style($colors: default primary secondary) {
  @include s-component("s-select") {
    .#{s-component()} {
      background-color: white;
      @include s-form-select-style(default);

      @include s-vertical-rhythme {
        margin-bottom: 1rem;
      }

      select:disabled + & {
        opacity: s-lnf(disabled-opacity);
      }
    }
    .#{s-component()}__search-field {
      width: 100%;
      height: 100%;
      outline: none;
      color: s-color(text);
      background-color: white;
      border: 1px solid s-color(default, -opacity 0.5);

      @include s-placeholder() {
        color: s-color(text, -opacity 0.4);
      }
    }
    .#{s-component()}__dropdown {
      top: calc(#{unquote("100% + #{3px}")});
      margin-top: s-rem(20px);
      @include s-transition(fast);
      background: white;
      @include s-depth(10);
    }
    .#{s-component()}--opened .#{s-component()}__dropdown {
      margin-top: 0;
    }
    .#{s-component()} {
      .#{s-component()}__optgroup:not(.#{s-component()}__optgroup--custom) {
        font-weight: bold;
      }
    }
    .#{s-component()}__option {
      color: s-color(text);
      @include s-transition(background fast);
    }
    select[required] + .#{s-component()}--placeholder {
      .#{s-component()}__selection {
        &:after {
          content: " *";
          color: s-color(error);
          font-size: 0.7em;
        }
      }
    }

    @each $color in $colors {
      $sel: ".#{s-component()}--#{$color}";
      select[is="#{s-component()}"][color="#{$color}"] + .#{s-component()},
      #{s-selector($sel)} {
        @include s-form-select-style($color);

        .#{s-component()}__search-container {
          background: s-color($color, -opacity 0.1);
          border-bottom: 1px solid s-color($color, -opacity 0.2);
        }
        .#{s-component()}__selection-tag {
          background: s-color($color, -opacity 0.6);
          color: white;
        }
        .#{s-component()}__reset,
        .#{s-component()}__selection-tag-close {
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><style>path{fill%3A#{str-replace("#{s-color($color)}","#","%23")};}</style><path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"/></svg>');
          opacity: 0.65;

          &:hover {
            opacity: 1;
          }
        }
        .#{s-component()}__option--selected {
          background: s-color($color, -opacity 0.2);
        }
        .#{s-component()}__option {
          &.active {
            background: s-color($color, -opacity 0.3);
          }
          &:hover,
          &:active {
            background: s-color($color, -opacity 0.6);
            color: white;
          }
        }
        .#{s-component()}__search-result {
          background: s-color($color);
          color: white;
        }
      }
    }
  }
}

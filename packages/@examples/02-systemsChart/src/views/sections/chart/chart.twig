<section class="section-chart {{ __paddingClasses(padding) }} {{ __marginClasses(margin) }}"
    s-specs="views.sections.chart"
    {{ __specsValues(_context)|raw }}
>
    <div class="_bkg">
        <img src="{{ bkg.url }}" />
    </div>
    <div class="_content">

        <div class="chart">

            <div class="_heading">
                
                <div class="_features"></div>

                <div class="_systems">
                    {% for system in systems %}
                        <div class="_system">
                            <div class="s-tooltip-container">
                                <a href="{{ system.url }}" target="_blank">
                                    <img class="_system-logo" src="{{ system.logo }}" />
                                </a>
                                <div class="s-tooltip:bottom s-color:complementary s-white-space:nowrap">
                                    {{ system.title }}
                                </div>
                                {% if system.whyNot %}
                                    <div class="_not"></div>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
                <div class="_notes">
                    <div class="_features"></div>
                    <div class="_systems">
                        {% for system in systems %}

                            {% set note = 0 %}

                            {% if not system.price %}
                                {% set note = note + 1 %}
                            {% endif %}

                            {% for key, feature in features %}
                                {% if system.features[key].rate %}
                                    {% set note = note + system.features[key].rate %}
                                {% elseif system.whyNot %}
                                {% elseif system.features[key].check %}
                                    {% if features[key].pts %}
                                        {% set note = note + features[key].pts %}
                                    {% else %}    
                                        {% set note = note + 1 %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}

                            <div class="_system">
                                {% if system.whyNot %}
                                    <div class="_note">-</div>
                                {% else %}
                                    <div class="_note">{{ note }}</div>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="_body">

                <div class="_features">

                    <div class="_feature">
                        Price
                    </div>

                    {% for feature in features %}
                        <div class="_feature">
                            <div class="s-tooltip-container">
                                {{ feature.title }}
                                {% if feature.pts %}
                                    <div class="s-tooltip-container">
                                        <span class="s-badge:outline s-color:complementary">
                                            <span class="_pts">{{ feature.pts }}</span>
                                        </span>
                                        <div class="s-tooltip s-white-space:nowrap">
                                            Ponderation 1-10
                                        </div>
                                    </div>
                                {% endif %}
                                {% if feature.category == 'feature' %}
                                    <i class="s-icon:feature"></i>
                                {% else %}
                                    <i class="s-icon:component"></i>
                                {% endif %}
                                <div class="s-tooltip:right s-color:info s-white-space:nowrap">
                                    {{ feature.description }}
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                    <div class="_feature">
                    </div>

                </div>

                <div class="_systems">
                    {% for system in systems %}
                        <div class="_system">

                            <div class="_feature">

                                {% if system.whyNot %}
                                    <div class="s-tooltip-container">
                                        <div class="_why-not"></div>
                                        <div class="s-tooltip s-color:info s-white-space:nowrap">
                                            {{ system.whyNot }}
                                        </div>
                                    </div>
                                {% else %}
                                    {% if system.price %}
                                        <span class="s-badge:outline s-color:error"> {{ system.prics }} </span>
                                    {% else %}
                                        <span class="s-badge:outline s-color:success"> FREE </span>
                                    {% endif %}
                                {% endif %}
                            </div>

                            {% for key, feature in features %}
                                <div class="_feature">

                                        {% if system.features[key].rate %}
                                            <div class="s-tooltip-container">
                                                <div class="_rating">
                                                    <span class="s-typo:bold">{{ system.features[key].rate }}</span>/100 <i class="s-icon:star"></i>
                                                </div>
                                                <div class="s-tooltip s-color:info s-white-space:nowrap">
                                                    {{ system.features[key].info }}. +<span class="s-typo:bold">{{ system.features[key].rate }}</span> pts
                                                </div>
                                            </div>

                                        {% elseif system.whyNot %}

                                            <div class="s-tooltip-container">
                                                <div class="_why-not"></div>
                                                <div class="s-tooltip s-color:info s-white-space:nowrap">
                                                    {{ system.whyNot }}
                                                </div>
                                            </div>
                
                                        {% else %}

                                            <div class="s-tooltip-container">
                                                {% if system.features[key].check %}
                                                    <i class="s-icon:check"></i>
                                                    <div class="s-tooltip s-color:success s-white-space:nowrap">
                                                        Yeah bro! 
                                                        {% if features[key].pts %}
                                                            <span class="s-typo:bold">+{{ features[key].pts }}</span> pts
                                                        {% else %}    
                                                            +1 pt
                                                        {% endif %}
                                                    </div>
                                                {% else %}
                                                    <i class="s-icon:cross"></i>
                                                    <div class="s-tooltip s-color:error s-white-space:nowrap">
                                                        Sorry but... no...
                                                    </div>
                                                {% endif %}
                                            </div>

                                        {% endif %}
                                    </div>
                            {% endfor %}

                        </div>
                    {% endfor %}
                </div>

            </div>

        </div>

    </div>
</section>
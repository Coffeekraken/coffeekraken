import{a as h,b as d,c as m,B as y,C as g}from"./index.esm.js";class S extends h{static get _definition(){return{trigger:{description:"Specify some trigger(s) on which to refocus a particular element like `event:actual`, `anchor`, `history`, etc...",type:{type:"Array<String>",splitChars:[","]},values:["event:eventName","anchor","history"],default:[]},timeout:{description:"Specify a timeout to wait before refocus the element",type:"Number",default:500},duration:{description:"Specify the duration of the refocus animation",type:"Number"},easing:{description:"Specify the easing function of the refocus animation",type:"Function"},focusedClass:{description:"Specify the class to add when the target element has been focused",type:"String|Boolean",default:"focused"},focusedClassDuration:{description:"Specify how many ms the focused class has to be added, then removed",type:"Number",default:1e3},offset:{description:"Specify the offset of the refocus animation in px",type:"Number"},offsetX:{description:"Specify the offset x of the refocus animation in px",type:"Number"},offsetY:{description:"Specify the offset y of the refocus animation in px",type:"Number"},align:{description:"Specify the alignment of the refocus animation",type:"String",values:["start","center","end"]},justify:{description:"Specify the justification of the refocus animation",type:"String",values:["start","center","end"]}}}}var _=globalThis&&globalThis.__awaiter||function(n,t,s,e){return new(s=s||Promise)(function(o,c){function f(i){try{a(e.next(i))}catch(r){c(r)}}function l(i){try{a(e.throw(i))}catch(r){c(r)}}function a(i){var r;i.done?o(i.value):((r=i.value)instanceof s?r:new s(function(p){p(r)})).then(f,l)}a((e=e.apply(n,t||[])).next())})};class u extends d{constructor(t,s,e){super(t,s,m({name:"s-refocus",interface:S},e??{})),this._currentScrolledTargets=[]}mount(){this.props.trigger.forEach(t=>{switch(t){case"anchor":setTimeout(()=>{var e;document.location.hash&&(e=this.node.querySelector(document.location.hash))&&this._scrollTo(e)},this.props.timeout);break;case"history":["hashchange","popstate","pushstate"].forEach(e=>{window.addEventListener(e,o=>{(e!=="pushstate"||(o=o.detail)!=null&&o.scroll)&&(document.location.hash?(o=this.node.querySelector(document.location.hash))&&this._scrollTo(o):setTimeout(()=>{this._scrollTo(document.body)},100))})});break;default:var s;t.match(/^event:/)&&(s=t.replace("event:","").trim(),this.node.addEventListener(s,e=>{this._scrollTo(e.target)}))}})}_scrollTo(t){return _(this,void 0,void 0,function*(){var s,e;this._currentScrolledTargets.includes(t)||t!==document.body&&!this.node.contains(t)||(s={$elm:this.node},this.props.duration&&(s.duration=this.props.duration),this.props.easing&&(s.easing=this.props.easing),this.props.offset&&(s.offset=this.props.offset),this.props.offsetX&&(s.offsetX=this.props.offsetX),this.props.offsetY&&(s.offsetY=this.props.offsetY),this.props.align&&(s.align=this.props.align),this.props.justify&&(s.justify=this.props.justify),(e=y(t))._isScrolling)||(e._isScrolling=!0,e._sRefocusFeatureCurrentElm&&this._currentScrolledTargets.splice(this._currentScrolledTargets.indexOf(e._sRefocusFeatureCurrentElm,1)),e._sRefocusFeatureCurrentElm=t,this._currentScrolledTargets.push(t),yield g(t,Object.assign(Object.assign({},s),{$elm:e,force:!0})),e._isScrolling=!1,this.props.focusedClass&&t!==document.body&&(t.classList.add(this.props.focusedClass),setTimeout(()=>{t.classList.remove(this.props.focusedClass)},this.props.focusedClassDuration)))})}}function v(n={},t="s-refocus"){u.define(t,u,Object.assign({},n))}export{v as default};

@keyframes o-loader {
    0% {
        border-width: 0.2em;
        border-radius: 50% 45% 40% 40%;
        transform: translate(-50%, -45%) scale(0.7) rotateX(-25deg) rotateY(0)
            rotateZ(10deg) skewY(0);
    }
    20% {
        border-width: 0.1em;
        border-radius: 45% 50% 50% 50%;
        transform: translate(-47%, -50%) scale(0.6) rotateX(10deg)
            rotateY(10deg) rotateZ(-5deg) skewY(10deg);
    }
    40% {
        border-width: 0.2em;
        border-radius: 45% 40% 60% 40%;
        transform: translate(-45%, -50%) scale(0.7) rotateX(0deg) rotateY(30deg)
            rotateZ(10deg) skewY(-10deg);
    }
    60% {
        border-width: 0.15em;
        border-radius: 50% 45% 45% 50%;
        transform: translate(-53%, -55%) scale(0.7) rotateX(25deg)
            rotateY(-20deg) rotateZ(-20deg) skewY(0);
    }
    80% {
        border-width: 0.15em;
        border-radius: 45% 40% 50% 40%;
        transform: translate(-45%, -55%) scale(0.7) rotateX(30deg)
            rotateY(10deg) rotateZ(-15deg) skewY(0);
    }
    100% {
        border-width: 0.2em;
        border-radius: 50% 45% 40% 40%;
        transform: translate(-50%, -45%) scale(0.7) rotateX(-25deg) rotateY(0)
            rotateZ(10deg) skewY(0);
    }
}

.o-loader {
    width: 1em;
    height: 1em;
    font-size: 50px;
    background: sugar.color(complementary);
    border-radius: 0.4em;
    position: relative;
    perspective: 1.5em;

    &:after {
        content: '';
        display: block;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 1em;
        height: 1em;
        border: 0.2em solid white;
        border-radius: 50% 45% 40% 40%;
        transform: translate(-50%, -50%) scale(0.7) rotateX(-25deg) rotateY(0)
            rotateZ(0);
        animation: o-loader 2s cubic-bezier(0.955, 0.01, 0.075, 0.99) infinite;
    }
}

@keyframes s-carpenter-loader-skew {
    0% {
        transform: rotateY(20deg) rotateX(20deg) rotateZ(-10deg) scaleY(0.9);
    }
    25% {
        transform: rotateY(-20deg) rotateX(-10deg) rotateZ(0deg) scaleY(0.9);
    }
    50% {
        transform: rotateY(40deg) rotateX(-10deg) rotateZ(10deg) scaleY(0.9);
    }
    75% {
        transform: rotateY(-10deg) rotateX(-40deg) rotateZ(0deg) scaleY(0.9);
    }
    100% {
        transform: rotateY(20deg) rotateX(20deg) rotateZ(-10deg) scaleY(0.9);
    }
}

@keyframes s-carpenter-loader-color {
    0% {
        color: sugar.color(complementary);
    }
    50% {
        color: sugar.color(accent);
    }
    100% {
        color: sugar.color(complementary);
    }
}

@keyframes s-carpenter-loader-blocks-1 {
    0% {
        top: 0;
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: 0;
        background: sugar.color(accent);
    }
    12.5% {
        top: 0;
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        background: sugar.color(accent);
    }
    25% {
    }
    37.5% {
    }
    50% {
    }
    62.5% {
        top: 0;
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        background: sugar.color(accent);
    }
    75% {
        top: 0;
        left: 0;
        right: 0;
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        background: sugar.color(complementary);
    }
    87.5% {
        top: 0;
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
    }
    100% {
        top: 0;
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        background: sugar.color(complementary);
    }
}
@keyframes s-carpenter-loader-blocks-2 {
    0% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: 0;
        background: sugar.color(main);
    }
    12.5% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: 0;
    }
    25% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: 0;
        right: 0;
        bottom: 0;
        background: sugar.color(accent);
    }
    37.5% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: 0;
        background: sugar.color(accent);
    }
    50% {
    }
    62.5% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: 0;
        background: sugar.color(accent);
    }
    75% {
    }
    87.5% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: 0;
        background: sugar.color(accent);
    }
    100% {
        top: 0;
        left: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        right: 0;
        bottom: 0;
        background: sugar.color(accent);
    }
}
@keyframes s-carpenter-loader-blocks-3 {
    0% {
        top: 0;
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        background: sugar.color(complementary);
    }
    12.5% {
    }
    25% {
    }
    37.5% {
        top: 0;
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        background: sugar.color(complementary);
    }
    50% {
        top: 0;
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: 0;
        background: sugar.color(main);
    }
    62.5% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: 0;
        background: sugar.color(main);
    }
    75% {
    }
    87.5% {
    }
    100% {
        top: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        left: 0;
        right: calc(50% + var(--s-carpenter-loader-blocks-gap) * 0.5);
        bottom: 0;
        background: sugar.color(main);
    }
}

.carpenter-loader-blocks {
    --s-carpenter-loader-blocks-gap: 0.1em;

    @sugar.color (accent);
    position: relative;
    display: inline-block;
    width: 1em;
    height: 1em;
    fill: sugar.color(main);

    ._block-1,
    ._block-2,
    ._block-3 {
        position: absolute;
        display: block;
        border-radius: 1em;
    }
    ._block-1 {
        background: sugar.color(accent);
        animation: s-carpenter-loader-blocks-1 1s linear infinite;
    }
    ._block-2 {
        background: sugar.color(main);
        animation: s-carpenter-loader-blocks-2 1s linear infinite;
    }
    ._block-3 {
        background: sugar.color(complementary);
        animation: s-carpenter-loader-blocks-3 1s linear infinite;
    }
}

.carpenter-loader {
    margin-block-end: sugar.margin(30);
    position: relative;
    left: 0.1em;

    svg {
        display: inline-block;
        height: 1em;
        width: 1em;
        animation: s-carpenter-loader 2s cubic-bezier(0.74, 0, 0.115, 1)
            infinite;
        transform-origin: 40% 55%;

        /* * {
            fill: sugar.color(main);
        } */
    }
}

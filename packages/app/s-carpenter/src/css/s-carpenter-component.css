@import './vars.css';
@import './generic/carpenter-loader.css';

[s-carpenter-initial-ui] {
    @s.theme.apply (light);
}

/* body {
}
body:before {
    content: ' ';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    z-index: 9999;
} */

.s-carpenter {
}
.s-carpenter_website-iframe,
.s-carpenter_editor-iframe {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.s-carpenter_editor-iframe {
    z-index: 90001;
    pointer-events: none;

    &.active {
        pointer-events: all;
    }
}

body:has(.s-carpenter_body) {
    display: flex;
    align-items: center;
    justify-content: center;
}

.s-carpenter_website-iframe {
    position: absolute;
    top: 0;
    left: calc(50% + var(--s-carpenter-viewport-offset-x, 0px));
    width: var(--s-carpenter-viewport-width, 100%);
    /* max-width: var(--s-carpenter-viewport-max-width, 100%); */
    transform: translateX(-50%);
    border-left: 1px solid s.color(main, --alpha 0.6);
    border-right: 1px solid s.color(main, --alpha 0.6);
    @s.transition;
    @s.scrollbar (accent);
    @s.depth (100);
    pointer-events: all;
}

.s-carpenter_ui-placeholders {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 90002;
    pointer-events: none;
}
.s-carpenter_ui-placeholder {
    position: absolute;
    pointer-events: none;
    background: transparent;
    /* background: rgba(255, 0, 0, 0.1); */

    .active > & {
        pointer-events: all;
        /* background: rgba(0, 255, 0, 0.1); */
    }
}

@keyframes s-carpenter-open-btn-in {
    from {
        opacity: 0;
        transform: translateX(calc(100% + 30px));
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.s-carpenter_open-btn {
    @s.ui.button();
    @s.color (complementary);
    position: fixed !important;
    z-index: 99999;
    top: 30px;
    right: 30px;
    /* animation: s-carpenter-open-btn-in 0.3s ease-out forwards; */

    svg {
        width: 1em;
        height: 1em;

        * {
            fill: white;
        }
    }

    &.loading {
        @s.ui.button ($lnf: 'loading');
    }
}

@keyframes s-carpenter-loading-popin-in {
    from {
        opacity: 0;
        transform: scale(0) translate(-50%, -50%);
    }
    to {
        opacity: 1;
        transform: scale(1) translate(-50%, -50%);
    }
}

@keyframes s-carpenter-loading-picture-in {
    from {
        opacity: 0;
        transform: rotateZ(-10deg) rotateX(-10deg) scale(0.5);
        filter: drop-shadow(0 0 0 rgba(0, 0, 0, 0));
    }
    to {
        opacity: 1;
        transform: rotateZ(5deg) rotateX(20deg) scale(1.3);
        filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.2));
    }
}
@keyframes s-carpenter-loading-logo-in {
    from {
        opacity: 0;
        transform: translateY(-50%);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
@keyframes s-carpenter-loading-version-in {
    from {
        opacity: 0;
        transform: translateY(50%);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.s-carpenter_loading {
    position: fixed;
    z-index: 99999;
    top: 50%;
    left: 50%;
    width: 400px;
    transform: scale(1) translate(-50%, -50%);
    transform-origin: 0 0;
    background: none;
    box-shadow: 0 0 100vw 100vw rgba(0, 0, 0, 0.5);
    animation: s-carpenter-loading-popin-in 0.3s
        cubic-bezier(0.755, 0.005, 0.185, 1.315) forwards;

    ._inner {
        background-color: s.color(main, background);
        text-align: center;
        @s.border.radius (30);
        @s.depth (100);
        perspective: 800px;
    }

    ._picture {
        padding: s.padding(50) s.padding(30) s.padding(30) s.padding(30);
        width: 100%;
        aspect-ratio: 16/10;
        overflow: hidden;
        opacity: 0;
        @s.border.radius (30);
        /* transform: rotateZ(5deg) rotateX(20deg) scale(1.3);
        filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.2)); */
        animation: s-carpenter-loading-picture-in 0.5s
            cubic-bezier(0.755, 0.005, 0.185, 1.315) forwards 0.3s;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            @s.border.radius (30);
            /* @s.depth (100); */
        }
    }

    ._version {
        position: absolute;
        top: s.margin(30);
        right: s.margin(30);
        font-weight: bold;
        color: s.color(main, text, --alpha 0.3);
        opacity: 0;
        animation: s-carpenter-loading-version-in 1s
            cubic-bezier(0.755, 0.005, 0.185, 1.315) forwards 0.4s;
    }

    ._picto {
        transform-origin: 50% 50%;
        /* animation: s-carpenter-loader-skew 4s linear infinite; */
    }

    ._logo {
        padding: s.padding(40);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: s.margin(20);
        opacity: 0;
        animation: s-carpenter-loading-logo-in 1s
            cubic-bezier(0.755, 0.005, 0.185, 1.315) forwards 0.4s;

        svg {
            opacity: 0.5;
            height: 60px;
            width: auto;
        }
    }

    ._loader {
        font-size: 44px;
        /* margin-block-end: s.margin(30); */
        /* animation: s-carpenter-loader-color 0.5s
            cubic-bezier(0.56, -0.005, 0.46, 1.505) infinite !important; */
        opacity: 0.3;
    }

    ._title {
        font-size: 28px;
        margin-block-end: s.margin(30);
        display: none;

        span {
            color: s.color(accent);
        }
    }
    ._text {
        font-size: 16px;
        line-height: 1.5;
        opacity: 0.6;

        span {
            color: s.color(accent);
        }
    }
}

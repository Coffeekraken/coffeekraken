!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("riot"),require("@coffeekraken/s-interface"),require("@coffeekraken/s-component-utils")):"function"==typeof define&&define.amd?define(["riot","@coffeekraken/s-interface","@coffeekraken/s-component-utils"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).index=e(t.riot,t.__SInterface,t.__SComponentUtils)}(this,(function(t,e,o){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={__proto__:null,[Symbol.toStringTag]:"Module"};return t&&Object.keys(t).forEach((function(o){if("default"!==o){var i=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:function(){return t[o]}})}})),e.default=t,Object.freeze(e)}var s=r(t),a=i(e),n=i(o);class c extends a.default{}c.definition={target:{type:"String"},group:{type:"String"},toggle:{type:{type:"Boolean",nullishAsTrue:!0},default:!1},history:{type:{type:"Boolean",nullishAsTrue:!0},default:!1},active:{type:{type:"Boolean",nullishAsTrue:!0},default:!1},saveState:{type:"Boolean",default:!1},trigger:{type:{type:"Array<String>",splitChars:[","]},default:["click"]}};const p={css:'s-activate,[is="s-activate"]{ display: inline-block; }',exports:{$targets:void 0,$groupElements:void 0,targetSelector:void 0,onBeforeMount(){if(this.component=new n.default(this.root,this.props,{interface:c}),this.component.props.saveState){if(!this.root.id)throw new Error('<red>[s-activate]</red> In order to use the "<yellow>saveState</yellow>" property, you MUST specify an "<cyan>id</cyan>" on your s-activate component');this.component.props.active=null!==localStorage.getItem(`s-activate-state-${this.root.id}`)}this.component.props.target&&(this.component.props.target.match(/^(\.|\[])/)?this.targetSelector=this.component.props.target:this.targetSelector=`#${this.component.props.target}`)},onMounted(){const t=Array.from(document.querySelectorAll(this.targetSelector));t.length&&(this.$targets=t),this.component.props.group&&(this.$groupElements=Array.from(document.querySelectorAll(`s-activate[group="${this.component.props.group}"]`))),this.component.props.trigger.forEach((t=>{switch(t){case"click":this.root.addEventListener("click",(t=>{this.isActive()&&this.component.props.toggle?this.unactivate():this.activate()}));break;case"anchor":document.location.hash===this.targetSelector&&this.activate(),window.addEventListener("hashchange",(t=>{document.location.hash===this.targetSelector&&this.activate()}))}})),this.root.activate=this.activate.bind(this),this.root.unactivate=this.unactivate.bind(this),this.root.isActive=this.isActive.bind(this),this.component.props.active&&this.activate(!0)},isActive(){return this.root.hasAttribute("active")},activate(t=!1){if(t||!this.isActive()){if(this.component.props.saveState){if(!this.root.id)throw new Error('<red>[s-activate]</red> In order to use the "<yellow>saveState</yellow>" property, you MUST specify an "<cyan>id</cyan>" on your s-activate component');localStorage.setItem(`s-activate-state-${this.root.id}`,!0)}this.component.props.history&&(document.location.hash=this.targetSelector),this.$groupElements&&this.$groupElements.forEach((t=>{if(t!==this.root)try{t.unactivate()}catch(e){}})),this.root.setAttribute("active",!0),this.$targets&&this.$targets.forEach((t=>{t.classList.add("active")}))}},unactivate(){if(this.isActive()){if(this.component.props.saveState){if(!this.root.id)throw new Error('<red>[s-activate]</red> In order to use the "<yellow>saveState</yellow>" property, you MUST specify an "<cyan>id</cyan>" on your s-activate component');localStorage.removeItem(`s-activate-state-${this.root.id}`)}this.root.removeAttribute("active"),this.$targets&&this.$targets.forEach((t=>{t.classList.remove("active")}))}}},template:null,name:"s-activate"};return s.register("s-activate",p),setTimeout((()=>{s.mount("s-activate")})),p.mount=()=>{s.mount("s-activate")},window.env||(window.env={SUGAR:{}}),window.env.SUGAR=JSON.parse('{"ENVIRONMENT":"development"}'),p}));

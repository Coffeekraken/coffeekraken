import{define as define$1}from"@coffeekraken/s-clipboard-copy-component";import __SLitComponent from"@coffeekraken/s-lit-component";import __deepMerge from"@coffeekraken/sugar/shared/object/deepMerge";import __wait from"@coffeekraken/sugar/shared/time/wait";import __hljs from"highlight.js/lib/core";import __langBash from"highlight.js/lib/languages/bash";import __knownCssProps from"known-css-properties";import __htmlTags from"html-tags";import __selfClosingHtmlTags from"html-tags/void";import __langJavascript from"highlight.js/lib/languages/javascript";import __langPhp from"highlight.js/lib/languages/php";import __langHtml from"highlight.js/lib/languages/xml";import{css as css$1,unsafeCSS,html}from"lit";import{unsafeHTML}from"lit/directives/unsafe-html.js";import{property,query}from"lit/decorators.js";import __decodeHtmlEntities from"@coffeekraken/sugar/js/html/decodeHtmlEntities";import __SInterface from"@coffeekraken/s-interface";import __scrollTo from"@coffeekraken/sugar/js/dom/scroll/scrollTo";import __prettier from"prettier/esm/standalone.mjs";import __prettierJs from"prettier/esm/parser-babel.mjs";import __prettierHtml from"prettier/esm/parser-html.mjs";import __prettierCss from"prettier/esm/parser-postcss.mjs";import __prettierPhp from"@prettier/plugin-php/standalone";const MODES=e=>({IMPORTANT:{className:"meta",begin:"!important"},HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]}}),TAGS=[...__htmlTags,...__selfClosingHtmlTags],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=__knownCssProps.all.reverse();function css(e){var t=MODES(e);const o=PSEUDO_ELEMENTS,i=PSEUDO_CLASSES;var s="@[a-z-.]+",a={className:"variable",begin:"(\\$[a-zA-Z-.][a-zA-Z0-9_.-]*)\\b"};return{name:"CSS",case_insensitive:!0,illegal:"[=/|']",contains:[{className:"sugar-function",begin:"sugar\\.[a-zA-Z0-9-_\\.]+",contains:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE]},{className:"sugar-mixin",begin:"@sugar\\.[a-zA-Z0-9-_\\.]+",contains:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+TAGS.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:"::("+o.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[e.NUMBER_MODE]},{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:"@(page|font-face)",lexemes:s,keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-zA-Z-\.]+/,keyword:"and or not only",attribute:MEDIA_FEATURES.join(" ")},contains:[{begin:s,className:"keyword"},{begin:/[a-zA-Z\.-]+(?=:)/,className:"attribute"},a,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,e.NUMBER_MODE]}]}}var __css="/* @sugar.highlightjs.theme; */\n\n:host {\n    display: block;\n}\n\n.s-code-example > * {\n        display: none;\n    }\n\n.s-code-example[mounted] > * {\n            display: block;\n        }\n\n.hljs {\n    overflow: visible;\n    white-space: pre-wrap;\n}\n\n.s-code-example__slot {\n    display: none;\n}\n\n.s-code-example__nav {\n    position: relative;\n    z-index: 1;\n}\n\n.s-code-example__tabs {\n    display: flex;\n    list-style: none;\n}\n\n.s-code-example__tab {\n}\n\n.s-code-example__content {\n    position: relative;\n    --paddingBlock: var(--s-theme-ui-code-paddingBlock, 3rem);\n    overflow: hidden;\n\n}\n\n.s-code-example[lines] .s-code-example__content {\n        max-height: calc(1.5em * var(--max-lines) + (var(--paddingBlock) * 2));\n    }\n\n.s-code-example--more .s-code-example__content {\n        max-height: 99999px !important;\n    }\n\n@media screen and  {\n\n.s-code-example__content {\n        --paddingBlock: calc(var(--paddingBlock) * 0.5);\n    }\n}\n\n:not([bare]) .s-code-example__content {\n    transition: var(--s-theme-ui-code-transition, 0);\n    border-radius: var(--s-theme-ui-code-borderRadius, 5px);box-shadow: var(--s-theme-depth-0, 0);\n}\n\n.s-code-example__more-bar {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    height: 50%;\n    width: 100%;\n    opacity: 0;\n    pointer-events: none;\n    display: flex;\n    align-items: flex-end;\n}\n\n.s-code-example[lines] .s-code-example__more-bar {\n        opacity: 1;\n        pointer-events: all;\n    }\n\n:not([bare]) .s-code-example__more-bar {\n    text-align: center;\n    padding-inline: var(--s-theme-ui-default-paddingInline, 1.5em);\n    padding-block: var(--s-theme-ui-default-paddingBlock, 0.75em);\n    justify-content: center;\n}\n\n:not([bare]) .s-code-example__more-bar:before {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        transition: var(--s-theme-transition-default, all .3s cubic-bezier(0.700, 0.000, 0.305, 0.995));background: linear-gradient(0deg, hsla(calc(var(--s-theme-color-current-h, 0) + var(--s-theme-color-current-surface-spin ,0)),calc((var(--s-theme-color-current-s, 0) + var(--s-theme-color-current-surface-saturation-offset, 0)) * 1%),calc((var(--s-theme-color-current-l, 0) + var(--s-theme-color-current-surface-lightness-offset, 0)) * 1%),var(--s-theme-color-current-surface-a, 1)) 0%, hsla(calc(var(--s-theme-color-current-h, 0) + var(--s-theme-color-current-spin ,0)),calc((var(--s-theme-color-current-s, 0)) * 1%),calc((var(--s-theme-color-current-l, 0)) * 1%),0) 100%);\n    }\n\n.s-code-example--more .s-code-example__more-bar:before {\n        height: 0;\n    }\n\n.s-code-example__code {\n    display: none;\n    line-height: 0;\n}\n\n.s-code-example__code[active] {\n        display: block;\n    }\n\n.s-code-example__code > code {\n        line-height: 1;\n    }\n\n.s-code-example__toolbar {\n    position: absolute;\n    right: var(--s-theme-space-20, 0.75rem);\n    top: var(--s-theme-space-20, 0.75rem);\n}\n\n.s-code-example__toolbar > * {\n        font-size: 20px;\n        opacity: 0.5;\n    }\n\n.s-code-example__toolbar > *:hover {\n            opacity: 1;\n        }\n\n[toolbar-position='nav'] .s-code-example__toolbar {\n    right: var(--s-theme-space-20, 0.75rem);\n    top: var(--s-theme-space-20, 0.75rem);\n    /* transform: translate(0, -50%); */\n}\n";class SCodeExampleComponentInterface extends __SInterface{static get _definition(){return{active:{description:'Specify which "tab" is active in case of multiple languages examples',type:"String"},toolbar:{description:'Specify what you want in the toolbar. Currently available item is "copy"',type:"Array<String>",values:["copy"],default:["copy"]},toolbarPosition:{description:'Specify the toolbar position. Can be "content" or "nav"',type:"String",values:["content","nav"],default:"nav"},languages:{description:'Specify some languages that you want to support. Must be "[key]: language" object syntax. See [highlight.js doc](https://github.com/highlightjs/highlight.js/blob/main/SUPPORTED_LANGUAGES.md) for supported languages',type:"Object",default:{}},lines:{description:"Specify how many lines to display at max",type:"Number"},moreLabel:{description:'Specify the "show more" button label',type:"String",default:"Show more"},lessLabel:{description:'Specigy the "show less" button label',type:"String",default:"Show less"},moreAction:{type:"String",default:"toggle"},more:{description:"Specify if you want to expand the more feature at start or not",type:"Boolean",default:!1},scrollOnMore:{description:'Specify if you want to scroll to the code when clicking on the "show more/less" button',type:"Boolean",default:!0},scrollToSettings:{description:"Specify some scrollTo settings",type:"IScrollToSettings",default:{}}}}}var __decorate=globalThis&&globalThis.__decorate||function(e,t,o,i){var s,a=arguments.length,n=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;0<=r;r--)(s=e[r])&&(n=(a<3?s(n):3<a?s(t,o,n):s(t,o))||n);return 3<a&&n&&Object.defineProperty(t,o,n),n},__awaiter=globalThis&&globalThis.__awaiter||function(e,n,r,l){return new(r=r||Promise)(function(o,t){function i(e){try{a(l.next(e))}catch(e){t(e)}}function s(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}a((l=l.apply(e,n||[])).next())})};define$1();class SCodeExample extends __SLitComponent{constructor(){var e;super(__deepMerge({litComponent:{shadowDom:!1},componentUtils:{interface:SCodeExampleComponentInterface}})),this._$copy=void 0,this._items=[],this._activeTabId=void 0;const t=Object.assign({html:__langHtml,javascript:__langJavascript,js:__langJavascript,php:__langPhp,bash:__langBash,shell:__langBash,css:css,scss:css},null!==(e=this.props.languages)&&void 0!==e?e:{});Object.keys(t).forEach(e=>{__hljs.registerLanguage(e,t[e])})}static get properties(){return __SLitComponent.properties({},SCodeExampleComponentInterface)}static get styles(){return css$1`
            ${unsafeCSS(__css)}
        `}firstUpdated(){return __awaiter(this,void 0,void 0,function*(){return this.$templates=this.querySelectorAll("template,code"),this.$templates.forEach(o=>{if(o.getAttribute){let e="babel";switch(null!==(i=null!==(i=o.getAttribute("id"))&&void 0!==i?i:o.getAttribute("language"))&&void 0!==i?i:o.getAttribute("lang")){case"html":case"xml":e="html";break;case"css":case"scss":case"postcss":e="css"}var i=__decodeHtmlEntities("textarea"===o.tagName.toLowerCase()&&o.value?o.value:o.innerHTML);let t=i;try{t=__prettier.format(i,{parser:e,plugins:[__prettierCss,__prettierHtml,__prettierJs,__prettierPhp]})}catch(e){}this._items=[...this._items,{id:null!==(i=null!==(i=null!==(i=o.getAttribute("id"))&&void 0!==i?i:o.getAttribute("language"))&&void 0!==i?i:o.getAttribute("lang"))&&void 0!==i?i:"html",lang:null!==(i=null!==(i=o.getAttribute("language"))&&void 0!==i?i:o.getAttribute("lang"))&&void 0!==i?i:"html",code:t,lines:t.trim().split("\n").length}],o.remove()}}),this.active?this.setActiveTab(this.active):this._items[0]&&this.setActiveTab(this._items[0].id),this._$pre=this.querySelector(".s-code-example__code"),this._$root=this.querySelector(".s-code-example"),!0})}setActiveTabByTab(e){this.setActiveTab(e.target.id)}get currentItem(){return this._activeTabId?this._items.find(e=>e.id===this._activeTabId):{}}setActiveTab(e){return __awaiter(this,void 0,void 0,function*(){yield __wait(),this._activeTabId=e,this.highlight(e)})}setMoreClass(){return __awaiter(this,void 0,void 0,function*(){this._more?this._$root.classList.add("s-code-example--more"):this._$root.classList.remove("s-code-example--more"),this.requestUpdate()})}toggleMore(){var e;this._more=!this._more,this.setMoreClass(),__scrollTo(this,Object.assign({},null!==(e=this.props.scrollToSettings)&&void 0!==e?e:{}))}highlight(t){const o=this.querySelector(`pre#${t} code`),i=this._items.find(e=>e.id===t);if(o.hasAttribute("inited"))this.setMoreClass();else{o.setAttribute("inited","true");let e;try{var s=__decodeHtmlEntities(o.innerHTML.replace(/(<|&lt;)!\s?--\?lit.*--\s?(>|&gt;)/,""));e=__hljs.highlight(s,{language:o.getAttribute("lang")})}catch(e){console.log(e)}i.highlightedCode=null!==(s=null===e||void 0===e?void 0:e.value)&&void 0!==s?s:"",this.setMoreClass()}}copy(){const t=this._activeTabId;var e=this._items.filter(e=>e.id===t)[0];this.$copy.copy(e.code)}render(){var e,t,o,i=this.currentItem;return html`
            <div
                class="${this.componentUtils.className()} ${this.props.more?this.componentUtils.className("more"):""}"
                ?lines="${this.lines}"
                ?mounted="${this.mounted}"
                ?bare="${this.bare}"
                toolbar-position="${this.toolbarPosition}"
            >
                <div class="templates">
                </div>

                <header class="${this.componentUtils.className("__nav")}">
                    <div
                        class="${this.componentUtils.className("__tabs","s-tabs")}"
                    >
                        ${(null!==(e=this._items)&&void 0!==e?e:[]).map(e=>html`
                                <div
                                    class="${this.componentUtils.className("__tab")}"
                                    id="${e.id}"
                                    ?active="${this._activeTabId===e.id}"
                                    @click="${this.setActiveTabByTab}"
                                >
                                    ${e.lang}
                                </div>
                            `)}
                    </div>
                    ${"nav"===this.toolbarPosition?html`
                                  <div
                                      class="${this.componentUtils.className("__toolbar")}"
                                  >
                                      <s-clipboard-copy
                                          @click="${this.copy}"
                                      ></s-clipboard-copy>
                                  </div>
                              `:""}
                </header>
                <div
                    class="${this.componentUtils.className("__content")}"
                    style="--max-lines: ${null!==(e=this.props.lines)&&void 0!==e?e:99999999};"
                >
                    ${"nav"!==this.toolbarPosition?html`
                                  <div
                                      class="${this.componentUtils.className("__toolbar")}"
                                  >
                                      <s-clipboard-copy
                                          @click="${this.copy}"
                                      ></s-clipboard-copy>
                                  </div>
                              `:""}
                    ${(null!==(e=this._items)&&void 0!==e?e:[]).map(e=>{var t;return html`
                            <pre
                                class="${this.componentUtils.className("__code")}"
                                style="line-height:0;"
                                id="${null!==(t=e.id)&&void 0!==t?t:e.lang}"
                                ?active="${this._activeTabId===(null!==(t=e.id)&&void 0!==t?t:e.lang)}"
                            >
                            <code lang="${null!==(t=e.lang)&&void 0!==t?t:e.id}" class="language-${e.lang} ${e.lang} ${this.props.bare?"":"hljs"}">${e.highlightedCode?unsafeHTML(e.highlightedCode):e.code.trim()}</code>
                        </pre>
                        `})}
                    ${this.props.lines&&i.lines>this.lines?html`
                        <div class="${this.componentUtils.className("__more-bar")}">
                            ${"toggle"===this.moreAction?html`
                                          <a
                                              class="${this.componentUtils.className("__more-button","s-btn")}"
                                              @click="${()=>this.toggleMore()}"
                                          >
                                              ${this._more?html`
                                                            ${null!==(t=this.props.lessLabel)&&void 0!==t?t:"Show less"}
                                                        `:html`
                                                            ${null!==(t=this.props.moreLabel)&&void 0!==t?t:"Show more"}
                                                        `}
                                          </a>
                                      `:html`
                                          <a
                                              class="${this.componentUtils.className("__more-button","s-btn s-color--accent")}"
                                              href="${this.moreAction}"
                                          >
                                              ${this._more?html`
                                                            ${null!==(o=this.props.lessLabel)&&void 0!==o?o:"Show less"}
                                                        `:html`
                                                            ${null!==(o=this.props.moreLabel)&&void 0!==o?o:"Show more"}
                                                        `}
                                          </a>
                                      `}                        
                            </a>
                        </div>
                    `:""}
                </div>
            </div>
        `}}function define(e={},t="s-code-example"){__SLitComponent.setDefaultProps(t,e),customElements.define(t,SCodeExample)}__decorate([property()],SCodeExample.prototype,"_items",void 0),__decorate([property()],SCodeExample.prototype,"_activeTabId",void 0),__decorate([property({type:String})],SCodeExample.prototype,"active",void 0),__decorate([property()],SCodeExample.prototype,"props",void 0),__decorate([query("s-clipboard-copy")],SCodeExample.prototype,"$copy",void 0),__decorate([query(".templates")],SCodeExample.prototype,"$templatesContainer",void 0);export{SCodeExample as default,define};
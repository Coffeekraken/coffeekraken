import __SLitComponent from"@coffeekraken/s-lit-component";import __deepMerge from"@coffeekraken/sugar/shared/object/deepMerge";import __Pickr from"@simonwep/pickr";import __baseCss from"@simonwep/pickr/dist/themes/nano.min.css?used";import{css,unsafeCSS,html}from"lit";import __SInterface from"@coffeekraken/s-interface";import __wait from"@coffeekraken/sugar/shared/time/wait";var __css="s-color-picker {\n    display: inline-block;\n    position: relative;\n}\n\n    s-color-picker:not([mounted]) > * {\n        display: none;\n    }\n\n    s-color-picker[input][preview] .s-color-picker {\n        display: flex;\n        position: relative;\n        align-items: stretch;\n    }\n\n    s-color-picker[input][preview] .s-color-picker .pickr {        }\n\n    s-color-picker[input][preview] .s-color-picker .pcr-button {\n            width: auto;\n            height: auto;\n            aspect-ratio: 1;\n            display: block;\n            height: 100%;\n        }\n\n    s-color-picker:not([preview]) .pickr {\n            display: none;\n        }\n\n    s-color-picker:not([input]):not([preview]) .s-color-picker {\n        position: relative;\n        display: inline-block;\n    }\n\n    s-color-picker .s-color-picker--top .s-color-picker__picker {\n        position: absolute !important;\n        top: auto !important;\n        right: 0 !important;\n        left: auto !important;\n        bottom: 100% !important;\n        pointer-events: all !important;\n    }\n\n    s-color-picker .s-color-picker--bottom .s-color-picker__picker {\n        position: absolute !important;\n        top: 100% !important;\n        right: 0 !important;\n        left: auto !important;\n        pointer-events: all !important;\n    }\n\ns-color-picker:not([bare]) .pcr-button:before,\n    s-color-picker:not([bare]) .pcr-button:after {\n        border-radius: var(--s-theme-ui-colorPicker-borderRadius, 10px);\n        /* overflow: hidden; */\n        background: var(--pcr-color);   \n        box-shadow: none;\n        transition: none;\n    }\n\ns-color-picker:not([bare]) .pcr-button {\n        box-shadow: none;\n    }\n\ns-color-picker:not([bare]) .pcr-button i {\n        color: white;\n        position: absolute;\n        z-index: 10;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        text-shadow: 0 0 0.2em rgba(0,0,0,0.3);\n    }\n\ns-color-picker:not([bare]):not([rtl])[preview][input] .s-color-picker__input {\n            border-top-right-radius: 0;\n            border-bottom-right-radius: 0;\n        }\n\ns-color-picker:not([bare]):not([rtl])[preview][input] .pcr-button:after,\n        s-color-picker:not([bare]):not([rtl])[preview][input] .pcr-button:before {\n            border-top-left-radius: 0;\n            border-bottom-left-radius: 0;\n        }\n\ns-color-picker:not([bare])[rtl][preview][input] .pcr-button:after,\n        s-color-picker:not([bare])[rtl][preview][input] .pcr-button:before {\n            border-top-right-radius: 0;\n            border-bottom-right-radius: 0;\n            order: 0;\n        }\n\ns-color-picker:not([bare])[rtl][preview][input] .s-color-picker__input {\n            border-top-left-radius: 0;\n            border-bottom-left-radius: 0;\n            order: 1;\n        }\n\n";class SColorPickerComponentInterface extends __SInterface{static get _definition(){return{name:{description:"Specify the name that will be assigned to the injected input if you don't provide one yourself",type:"String",default:"date"},value:{description:"Specify the initial value for your picker",type:"String"},placeholder:{description:"Specify the placeholder that will be assigned to the injected input if you don't provide one yourself",type:"String",default:"Select a color"},theme:{description:"Specify the theme you want to use for this picker",type:"String",values:["nano","monolith"],default:"nano"},input:{description:"Specify if you dont want an automatically injected text input when you dont provide yours",type:"Boolean",default:!1},preview:{description:"Specify if you want to display the preview or not",type:"Boolean",default:!1,physical:!0},position:{description:'Specify the position of the picker. Can be "top" or "bottom"',type:"String",values:["top","bottom"],default:"bottom"},swatches:{description:"Specify some colors you want in your swatches",type:"Array<String>",default:[]}}}}var __awaiter=globalThis&&globalThis.__awaiter||function(t,s,p,a){return new(p=p||Promise)(function(o,e){function n(t){try{r(a.next(t))}catch(t){e(t)}}function i(t){try{r(a.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?o(t.value):((e=t.value)instanceof p?e:new p(function(t){t(e)})).then(n,i)}r((a=a.apply(t,s||[])).next())})};class SColorPicker extends __SLitComponent{constructor(){super(__deepMerge({litComponent:{shadowDom:!1},componentUtils:{interface:SColorPickerComponentInterface}})),this._hasInput=!1,this._hasPreview=!1,this._$input=this.querySelector("input"),this._hasInput=null!==this._$input,this._$preview=this.querySelector("button"),this._hasPreview=null!==this._$preview}static get properties(){return __SLitComponent.properties({},SColorPickerComponentInterface)}static get styles(){return css`
            ${unsafeCSS(`
            ${__baseCss}
            ${__css}
        `)}
        `}firstUpdated(){var i,r,p,a,c;return __awaiter(this,void 0,void 0,function*(){yield __wait(100),this._$input?this.append(this._$input):this._$input=this.querySelector("input"),null!==(i=this._$input)&&void 0!==i&&i.hasAttribute("name")||null!==(r=this._$input)&&void 0!==r&&r.setAttribute("name",this.props.name),null!==(r=this._$input)&&void 0!==r&&r.hasAttribute("placeholder")||null!==(p=this._$input)&&void 0!==p&&p.setAttribute("placeholder",this.props.placeholder),null!==(p=this._$input)&&void 0!==p&&p.hasAttribute("autocomplete")||null!==(a=this._$input)&&void 0!==a&&a.setAttribute("autocomplete","off"),this._$preview?this.append(this._$preview):this._$preview=this.querySelector("button"),this._$root=this.querySelector("."+this.componentUtils.className(""));var t=null!==(c=null!==(a=this.props.value)&&void 0!==a?a:null===(c=this._$input)||void 0===c?void 0:c.value)&&void 0!==c?c:"#ff0000";const s=__Pickr.create({el:this.querySelector("."+this.componentUtils.className("__picker")),theme:"nano",container:this._$root,default:t,inline:!0,comparison:!1,swatches:[],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!0,input:!0,clear:!0}}}),e=this.querySelector(".pcr-button");function o(){const t=s.getColor(),e=t.toHSLA(),o=t.toHSVA(),n=t.toRGBA(),i=t.toHEXA(),r=t.toCMYK();return{isOpened:s.isOpen(),hsla:{h:e[0],s:e[1],l:e[2],a:e[3],string:`hsla(${e[0]},${e[1]},${e[2]},${e[3]})`},hsva:{h:o[0],s:o[1],v:o[2],a:o[3],string:`hsva(${o[0]},${o[1]},${o[2]},${o[3]})`},rgba:{r:n[0],g:n[1],b:n[2],a:n[3],string:`rgba(${n[0]},${n[1]},${n[2]},${n[3]})`},hex:i.toString(),cmyk:{c:r[0],m:r[1],y:r[2],k:r[3],string:`cmyk(${r[0]},${r[1]},${r[2]},${r[3]})`}}}null!==e&&void 0!==e&&(e.innerHTML=`
            ${this.colorIcon?`
                ${this.colorIcon}
            `:`
                <i class="s-icon s-icon--color"></i>
            `}
        `),s.on("change",()=>{s.applyColor();var t=o(),e=new CustomEvent("change",{detail:t});this._$input&&(this._$input.value=t.hex),this.dispatchEvent(e)}),s.on("show",()=>{var t=o(),t=new CustomEvent("show",{detail:t});this.dispatchEvent(t)}),s.on("hide",()=>{var t=o(),t=new CustomEvent("hide",{detail:t});this.dispatchEvent(t)}),s.on("cancel",()=>{var t=o(),t=new CustomEvent("cancel",{detail:t});this.dispatchEvent(t)}),this._$input&&(this._$input.addEventListener("focus",()=>{s.show()}),this._$input.addEventListener("change",()=>{s.setColor(this._$input.value)}));const n=this.querySelector(".pcr-app");null!==n&&void 0!==n&&n.classList.add(this.componentUtils.className("__picker"))})}render(){return html`
            <div
                class="${this.componentUtils.className("")} ${this.componentUtils.className("")}--${this.props.position}"
            >
                ${!this._hasInput&&this.props.input?html`
                    <input type="text" autocomplete="off" name="${this.props.name}" value="${this.props.value}" placeholder="${this.props.placeholder}" class="${this.componentUtils.className("__input","s-input")}" />
                `:this._hasInput?"":html`
                    <input type="hidden" name="${this.props.name}" value="${this.props.value}" />
                `}
                <div class="${this.componentUtils.className("__picker")}"></div>
            </div>
        `}}function define(t={},e="s-color-picker"){__SLitComponent.setDefaultProps(e,t),customElements.define(e,SColorPicker)}export{SColorPicker as default,define};
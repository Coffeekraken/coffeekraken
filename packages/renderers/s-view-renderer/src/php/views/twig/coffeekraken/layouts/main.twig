<!--
/**
 * @name               main
 * @namespace          php.views.layouts
 * @type               blade
 *
 * Main layout that handle things like scripts import, stylesheets import, etc...
 *
 * @since            2.0.0
 * @author 	        Olivier Bossel <olivier.bossel@gmail.com> (https://coffeekraken.io)
 */
-->

{% set ogObj = {} %}
{% if metas and metas.og %}
    {% set ogObj = metas.og %}
{% endif %}

{% if frontspec.metas.og %}
    {% set ogObj = frontspec.metas.og|toArray|merge(ogObj) %}
{% endif %}

{% if not metas %}
    {% set metas = [] %}
{% endif %}

{% set metasObj = metas %}
{% if frontspec.metas %}
    {% set metasObj = frontspec.metas|toArray|merge(metas) %}
{% endif %}

{% set lang = 'en' %}
{% if metas.lang %}
    {% set lang = metas.lang %}
{% elseif frontspec.metas.lang %}
    {% set lang = frontspec.metas.lang %}
{% endif %}

{% set dir = 'ltr' %}
{% if metas.dir %}
    {% set dir = metas.dir %}
{% elseif frontspec.metas.dir %}
    {% set dir = frontspec.metas.dir %}
{% endif %}

<!DOCTYPE html>
<html lang="{{ lang }}" dir="{{ dir }}">
<head>

    
    <!-- metas -->
    {# {!! \Sugar\frontspec\metas($frontspec->metas, $env) !!} #}
    
    <!-- og -->
    {{ frontspecOg(ogObj)|raw }}
    
    <!-- assets -->
    {% set cacheBuster = '' %}
    {% if shared.server.sessionId %}
        {% set cacheBuster = shared.server.sessionId %}
    {% endif %}
    {{ frontspecAssets(frontspec.assets, cacheBuster)|raw }}
        
    {% block head %}{% endblock %}

    <!-- GTM -->
    {% if config.google.gtm %}
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','{{ config.google.gtm }}');</script>
    {% endif %}

</head>

<body>

    hello

    {% block body %}{% endblock %}

{# <body @if (isset($bodyAttributes)) @foreach ($bodyAttributes as $key => $value){{ $key }}="{{ $value }}" @endforeach @endif> #}

    {# <!-- GTM noscript -->
    @if (isset($config->google->gtm))
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ $config->google->gtm }}"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    @endif

    @if (isset($SUGAR))
        <script id="sugar-override">
            document.SUGAR = {!! json_encode($SUGAR) !!}
        </script>
    @endif

    @yield('body') #}

</body>

</html>

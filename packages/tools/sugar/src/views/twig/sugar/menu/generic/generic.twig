{% macro menu(items, level) %}
    {% for item in items %}
        <li class="s-menu__item {{ item.attributes.class }} s-menu__item--level-{{ level - 1 }}" {{ attrs(item.attributes, ['class']) }}>
            {% if item.raw %}
                {{ item.raw|raw }}
            {% else %}
                <a class="s-menu__link s-menu__link--level-{{ level - 1 }}" href="{{ item.href }}">
                    {{ item.label|raw }}
                </a>
            {% endif %}
            {% if item.children %}
                <ul class="s-menu__children s-menu--level-{{ level }}" style="--s-menu-items: {{ item.children|length }};">
                    {{ _self.menu(item.children, level + 1)|raw }}
                </ul>
            {% endif %}
        </li>
    {% endfor %}
{% endmacro %}

<input type="checkbox" id="{{ id ? id : 'menu' }}" hidden />
<div id="{{ id ? id : 'menu' }}" class="s-menu {{ attributes.class }}" {{ attrs(attributes, ['class']) }} style="--s-menu-items: {{ menu.items|length }};">
    <ul class="s-menu__inner s-menu--level-0">
        {{ _self.menu(menu.items, 1)|raw }}
    </ul>
</div>
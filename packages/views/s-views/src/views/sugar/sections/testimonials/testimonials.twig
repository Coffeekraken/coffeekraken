{% set section = {
    type: 'testimonials'
}|merge(section ?? {}) %}

{% extends 'sugar/sections/simple/simple.twig' %}

{% block content %}

    <div class="_content {{ __spacingClasses(spacing, 30) }}">

        <ol class="_testimonials">
        {% for idx, testimonial in testimonials %}
            <li class="_testimonial {{ __spacingClasses(spacing, 30) }}">
                {% if testimonial.rating %}
                    <div class="_rating">
                        <p class="_text">{{ testimonial.rating }}</p>
                        <div class="_stars" style="--percent: {{ 100 / testimonial.total * testimonial.rating }}">
                            <div class="_stars-total">
                                {% for i in 0..testimonial.total - 1 %}
                                    {{ testimonial.icon|raw }}
                                {% endfor %}
                            </div>
                            <div class="_stars-rating">
                                {% for i in 0..testimonial.total - 1 %}
                                    {{ testimonial.icon|raw }}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                {% endif %}
                {% if testimonial.text %}
                    <p class="_text s-typo s-typo-lead">{{ testimonial.text }}</p>
                {% endif %}
                <div class="_author">
                    {% if testimonial.image %}
                        <figure class="_figure s-media">
                            <img class="_img" src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}" />
                        </figure>
                    {% endif %}
                    {% if testimonial.name or testimonial.role %}
                        <div class="_metas">
                            {% if testimonial.name %}
                                <h3 class="_name s-typo s-typo-h4">{{ testimonial.name }}</h3>
                            {% endif %}
                            {% if testimonial.role %}
                                <h3 class="_name s-typo s-typo-p">{{ testimonial.role }}</h3>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </li>
        {% endfor %}
        </ol>

    </div>

{% endblock %}
<s-highlight-js>

  <pre>
    <code class={ `language-${$props.language}` }></code>
  </pre>

  <style type="postcss">
    :host {
      display: block;
    }
  </style>

  <script>

    import prism from 'prismjs';
    import 'prismjs/components/prism-javascript';
    import 'prismjs/components/prism-css';
    import 'prismjs/components/prism-markup';
    import 'prismjs/components/prism-bash';
    import __SHighlightJsComponentInterface from './interface/SHighlightJsComponentInterface.ts';

    export default {
      state: {
        code: ''
      },
      onBeforeMount() {
        this.$props = __SHighlightJsComponentInterface.apply(this.props).value;
        this.state.code = this.root.innerHTML;
        this.root.innerHTML = '';
      },
      onMounted() {
        const $code = this.root.querySelector('code');
        $code.innerHTML = prism.highlight(this.state.code.trim(), prism.languages.javascript, 'javascript').trim();

        const themeImport = `@import url('${this.$props.theme}');`;
        const $style = document.createElement('style');
        $style.type = 'text/css';
        $style.appendChild(document.createTextNode(themeImport));
        this.root.appendChild($style);
      }
    }
  </script>
</s-highlight-js>
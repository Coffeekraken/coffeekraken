{"version":3,"sources":["SInputPopup.js"],"names":["__deepMerge","require","__SInput","__SPopup","__activeSpace","module","exports","settings","closeDelay","$input","_settings","on","promise","isPending","cancel","value","setTimeout","parent","remove","resolve","append","height","$content","getScrollHeight"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,wBAAD,CAA3B;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,gBAAD,CAAxB;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMG,aAAa,GAAGH,OAAO,CAAC,wBAAD,CAA7B;AAEA;;;;;;;;;;;;;;;;;;;;AAkBAI,MAAM,CAACC,OAAP;AAAA;;AAAA;;AACE;;;;;;;;;AASA,uBAAYC,QAAZ,EAA2B;AAAA;;AAAA,QAAfA,QAAe;AAAfA,MAAAA,QAAe,GAAJ,EAAI;AAAA;;AAAA;;AACzB,8BACEP,WAAW,CACT;AACEQ,MAAAA,UAAU,EAAE,GADd;AAEEC,MAAAA,MAAM,EAAE;AAFV,KADS,EAKTF,QALS,CADb,EADyB,CAWzB;;AACA,UAAKE,MAAL,GAAc,IAAIP,QAAJ,CAAa,MAAKQ,SAAL,CAAeD,MAA5B,CAAd;;AAEA,UAAKE,EAAL,CAAQ,QAAR,EAAkB,MAAM;AACtB,UAAI,CAAC,MAAKF,MAAL,CAAYG,OAAZ,CAAoBC,SAApB,EAAL,EAAsC;;AACtC,YAAKJ,MAAL,CAAYG,OAAZ,CAAoBE,MAApB;AACD,KAHD;;AAKA,UAAKL,MAAL,CAAYG,OAAZ,CAAoBD,EAApB,CAAuB,SAAvB,EAAmCI,KAAD,IAAW;AAC3CC,MAAAA,UAAU,CAAC,MAAM;AACf,cAAKC,MAAL,CAAYC,MAAZ;;AACA,cAAKN,OAAL,CAAaO,OAAb,CAAqBJ,KAArB;AACD,OAHS,EAGP,MAAKL,SAAL,CAAeF,UAHR,CAAV;AAID,KALD;;AAOA,UAAKY,MAAL,CAAY,MAAKX,MAAjB;;AA1ByB;AA2B1B;;AArCH;AAAA;AAAA,6BAuCW;AACP;;AACA,WAAKY,MAAL,GAAc,KAAKC,QAAL,CAAcC,eAAd,KAAkC,CAAhD;AACD;AA1CH;;AAAA;AAAA,EAA2CpB,QAA3C","sourcesContent":["const __deepMerge = require('../../object/deepMerge');\nconst __SInput = require('../form/SInput');\nconst __SPopup = require('./SPopup');\nconst __activeSpace = require('../../core/activeSpace');\n\n/**\n * @name                  SInputPopup\n * @namespace           node.blessed.popup\n * @type                  Class\n * @extends               SPopup\n *\n * This class represent a simple input in a popup\n *\n * @param        {Object}         [settings = {}]         A settings object to configure your list. Here's the available settings:\n * - closeDelay (500) {Number}: The delay before closing the popup when the input has been validated\n * - $input ({}) {Object}: An object of settings passed to the SInput instance constructor\n *\n * @example       js\n * const SInputPopup = require('@coffeekraken/sugar/node/blessed/popup/SInputPopup');\n * new SInputPopup({});\n *\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SInputPopup extends __SPopup {\n  /**\n   * @name                  constructor\n   * @type                  Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(\n      __deepMerge(\n        {\n          closeDelay: 500,\n          $input: {}\n        },\n        settings\n      )\n    );\n\n    // create an input\n    this.$input = new __SInput(this._settings.$input);\n\n    this.on('detach', () => {\n      if (!this.$input.promise.isPending()) return;\n      this.$input.promise.cancel();\n    });\n\n    this.$input.promise.on('resolve', (value) => {\n      setTimeout(() => {\n        this.parent.remove(this);\n        this.promise.resolve(value);\n      }, this._settings.closeDelay);\n    });\n\n    this.append(this.$input);\n  }\n\n  update() {\n    super.update();\n    this.height = this.$content.getScrollHeight() + 5;\n  }\n};\n"]}
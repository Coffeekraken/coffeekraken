{"version":3,"sources":["SDocMapStreamActions.js"],"names":["__SActionsStreamAction","require","__docMap","__fs","module","exports","settings","streamObj","_settings","checkStreamObject","Promise","resolve","reject","docMap","outputDir","writeFileSync","JSON","stringify","type","required"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,sBAAsB,GAAGC,OAAO,CAAC,sCAAD,CAAtC;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,qBAAD,CAAxB;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,IAAD,CAApB;AAEA;;;;;;;;;;;;;;;AAaAG,MAAM,CAACC,OAAP;AAAA;;AAAA;;AACE;;;;;;;;;;AAkBA;;;;;;;;;AASA,gCAAYC,QAAZ,EAA2B;AAAA,QAAfA,QAAe;AAAfA,MAAAA,QAAe,GAAJ,EAAI;AAAA;;AAAA;;AAAA,6BACnBA,QADmB;AAE1B;AAED;;;;;;;;;;;AAhCF;AAAA;AAAA,wBAyCMC,SAzCN,EAyCiBD,QAzCjB,EAyC4C;AAAA,UAA3BA,QAA2B;AAA3BA,QAAAA,QAA2B,GAAhB,KAAKE,SAAW;AAAA;;AACxC;AACA,WAAKC,iBAAL,CAAuBF,SAAvB,EAFwC,CAIxC;;AACA,aAAO,IAAIG,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;AAC5C;AACA,cAAMC,MAAM,GAAG,MAAMX,QAAQ,CAACK,SAAS,CAACO,SAAX,CAA7B;;AAEAX,QAAAA,IAAI,CAACY,aAAL,CACER,SAAS,CAACO,SAAV,GAAsB,cADxB,EAEEE,IAAI,CAACC,SAAL,CAAeJ,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAFF;;AAKAF,QAAAA,OAAO,CAACJ,SAAD,CAAP;AACD,OAVM,CAAP;AAWD;AAzDH;;AAAA;AAAA,EAAoDP,sBAApD,4CAUyB;AACrBc,EAAAA,SAAS,EAAE;AACTI,IAAAA,IAAI,EAAE,QADG;AAETC,IAAAA,QAAQ,EAAE;AAFD;AADU,CAVzB,mCAiBgB,IAjBhB","sourcesContent":["const __SActionsStreamAction = require('../../../stream/SActionsStreamAction');\nconst __docMap = require('../../../doc/docMap');\nconst __fs = require('fs');\n\n/**\n * @name                SDocMapStreamActions\n * @namespace           node.build.doc.actions\n * @type                Class\n * @extends             SActionsStreamAction\n *\n * This function is responsible of generating the docMap.json file at the root of the documentation directory\n *\n * @param       {Object}Â        streamObj          The streamObj object with the properties described bellow:\n * @return      {Promise}                         A simple promise that will be resolved when the process is finished\n *\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SDocMapStreamActions extends __SActionsStreamAction {\n  /**\n   * @name            definitionObj\n   * @type             Object\n   * @static\n   *\n   * Store the definition object that specify the streamObj required properties, types, etc...\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static definitionObj = {\n    outputDir: {\n      type: 'String',\n      required: true\n    }\n  };\n\n  static once = true;\n\n  /**\n   * @name            constructor\n   * @type            Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(settings);\n  }\n\n  /**\n   * @name          run\n   * @type          Function\n   * @async\n   *\n   * Override the base class run method\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  run(streamObj, settings = this._settings) {\n    // make sure we have a correct streamObj\n    this.checkStreamObject(streamObj);\n\n    // return the promise for this action\n    return new Promise(async (resolve, reject) => {\n      // get the docmap object\n      const docMap = await __docMap(streamObj.outputDir);\n\n      __fs.writeFileSync(\n        streamObj.outputDir + '/docMap.json',\n        JSON.stringify(docMap, null, 4)\n      );\n\n      resolve(streamObj);\n    });\n  }\n};\n"]}
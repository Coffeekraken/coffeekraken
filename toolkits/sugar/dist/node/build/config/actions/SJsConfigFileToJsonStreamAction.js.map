{"version":3,"sources":["SJsConfigFileToJsonStreamAction.js"],"names":["__webpack","require","__getFilename","__packageRoot","__deepMerge","__fs","__path","__SActionsStreamAction","__SBuildJsCli","stream","module","exports","settings","id","streamObj","resolve","reject","config","input","data","JSON","stringify","type","required"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,SAAD,CAAzB;;AACA,IAAMC,aAAa,GAAGD,OAAO,CAAC,sBAAD,CAA7B;;AACA,IAAME,aAAa,GAAGF,OAAO,CAAC,2BAAD,CAA7B;;AACA,IAAMG,WAAW,GAAGH,OAAO,CAAC,2BAAD,CAA3B;;AACA,IAAMI,IAAI,GAAGJ,OAAO,CAAC,IAAD,CAApB;;AACA,IAAMK,MAAM,GAAGL,OAAO,CAAC,MAAD,CAAtB;;AACA,IAAMM,sBAAsB,GAAGN,OAAO,CAAC,sCAAD,CAAtC;;AACA,IAAMO,aAAa,GAAGP,OAAO,CAAC,mBAAD,CAA7B;;AACA,IAAM;AAAEQ,EAAAA;AAAF,IAAaR,OAAO,CAAC,QAAD,CAA1B;AAEA;;;;;;;;;;;;;;;AAaAS,MAAM,CAACC,OAAP;AAAA;;AAAA;;AACE;;;;;;;;;;AAgBA;;;;;;;;;AASA,2CAAYC,QAAZ,EAA2B;AAAA,QAAfA,QAAe;AAAfA,MAAAA,QAAe,GAAJ,EAAI;AAAA;;AAAA;;AAAA,6BAEvBR,WAAW,CACT;AACES,MAAAA,EAAE,EAAE;AADN,KADS,EAITD,QAJS,CAFY;AAS1B;AAED;;;;;;;;;;;AArCF;AAAA;AAAA,wBA8CME,SA9CN,EA8CiBF,QA9CjB,EA8C2B;AACvB,sGAAiBE,SAAjB,EAA4B,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/C;AACA,YAAMC,MAAM,GAAGhB,OAAO,CAACa,SAAS,CAACI,KAAX,CAAtB,CAF+C,CAI/C;;;AACAJ,QAAAA,SAAS,CAACK,IAAV,GAAiBC,IAAI,CAACC,SAAL,CAAeJ,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAjB,CAL+C,CAO/C;;AACAF,QAAAA,OAAO,CAACD,SAAD,CAAP;AACD,OATD;AAUD;AAzDH;;AAAA;AAAA,EAA+DP,sBAA/D,4CAUyB;AACrBW,EAAAA,KAAK,EAAE;AACLI,IAAAA,IAAI,EAAE,QADD;AAELC,IAAAA,QAAQ,EAAE;AAFL;AADc,CAVzB","sourcesContent":["const __webpack = require('webpack');\nconst __getFilename = require('../../../fs/filename');\nconst __packageRoot = require('../../../path/packageRoot');\nconst __deepMerge = require('../../../object/deepMerge');\nconst __fs = require('fs');\nconst __path = require('path');\nconst __SActionsStreamAction = require('../../../stream/SActionsStreamAction');\nconst __SBuildJsCli = require('../../SBuildJsCli');\nconst { stream } = require('globby');\n\n/**\n * @name                SJsConfigFileToJsonStreamAction\n * @namespace           node.build.config.actions\n * @type                Class\n * @extends             SActionsStreamAction\n *\n * This function is responsible of converting a javascript config file to a simple json\n *\n * @param       {Object}Â        streamObj          The streamObj object with the properties described bellow:\n * @return      {Promise}                         A simple promise that will be resolved when the process is finished\n *\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SJsConfigFileToJsonStreamAction extends __SActionsStreamAction {\n  /**\n   * @name            definitionObj\n   * @type             Object\n   * @static\n   *\n   * Store the definition object that specify the streamObj required properties, types, etc...\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static definitionObj = {\n    input: {\n      type: 'String',\n      required: true\n    }\n  };\n\n  /**\n   * @name            constructor\n   * @type            Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(\n      __deepMerge(\n        {\n          id: 'actionStream.action.config.configFileToJson'\n        },\n        settings\n      )\n    );\n  }\n\n  /**\n   * @name          run\n   * @type          Function\n   * @async\n   *\n   * Override the base class run method\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  run(streamObj, settings) {\n    return super.run(streamObj, (resolve, reject) => {\n      // get the config object from input file\n      const config = require(streamObj.input);\n\n      // transform the config to JSON\n      streamObj.data = JSON.stringify(config, null, 4);\n\n      // resolve the action\n      resolve(streamObj);\n    });\n  }\n};\n"]}
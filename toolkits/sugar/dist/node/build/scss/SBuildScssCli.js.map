{"version":3,"sources":["SBuildScssCli.js"],"names":["__SCli","require","__sugarConfig","__SBuildScssActionsStream","__SPromise","__deepMerge","module","exports","settings","id","name","argsObj","resolve","reject","trigger","cancel","stream","streamPromise","start","pipe","res","streamObj","data","input","type","alias","description","default","level","outputDir","watch","style","map","prod","sugarJsonDirs"],"mappings":"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","sourcesContent":["const __SCli = require('../../cli/SCli');\nconst __sugarConfig = require('../../config/sugar');\nconst __SBuildScssActionsStream = require('../../build/scss/SBuildScssActionsStream');\nconst __SPromise = require('../../promise/SPromise');\nconst __deepMerge = require('../../object/deepMerge');\n\n/**\n * @name            SBuildScssCli\n * @namespace           node.build.scss\n * @type            Class\n * @extends         SCli\n *\n * This class represent the build SCSS cli\n *\n * @since       2.0.0\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SBuildScssCli extends __SCli {\n  /**\n   * @name          command\n   * @type          String\n   * @static\n   *\n   * Store the command string\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static command = 'sugar build.scss %arguments';\n\n  /**\n   * @name          definitionObj\n   * @type          Object\n   * @static\n   *\n   * Store the definition object\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static definitionObj = {\n    input: {\n      type: 'String',\n      alias: 'i',\n      description: 'Input files glob pattern',\n      default: __sugarConfig('build.scss.input'),\n      level: 1\n    },\n    outputDir: {\n      type: 'String',\n      alias: 'o',\n      description: 'Output directory path',\n      default: __sugarConfig('build.scss.outputDir'),\n      level: 1\n    },\n    watch: {\n      type: 'String|Object',\n      alias: 'w',\n      description: 'Watch files glob pattern or settings object',\n      default: __sugarConfig('build.scss.watch'),\n      level: 1\n    },\n    style: {\n      type: 'String',\n      alias: 's',\n      description: 'Output style (nested,expanded,compact,compressed)',\n      default: __sugarConfig('build.scss.style') || 'expanded',\n      level: 1\n    },\n    map: {\n      type: 'Boolean',\n      alias: 'm',\n      description: 'Generate a sourcemap file',\n      default: __sugarConfig('build.scss.map') || true,\n      level: 1\n    },\n    prod: {\n      type: 'Boolean',\n      alias: 'p',\n      description: 'Generate the production ready files',\n      default: __sugarConfig('build.scss.prod') || false,\n      level: 1\n    },\n    sugarJsonDirs: {\n      type: 'String|Array<String>',\n      alias: 'a',\n      description: 'Specify the directory where to search for sugar.json files',\n      default: __sugarConfig('core.sugarJsonDirs'),\n      level: 1\n    },\n    'import.sugar': {\n      type: 'Boolean',\n      description: 'Import the coffeekraken sugar toolkit',\n      default: __sugarConfig('build.scss.import.sugar') || true,\n      level: 1\n    },\n    'vendor.sass': {\n      type: 'Object',\n      description: 'Object passed to the sass compiler',\n      default: __sugarConfig('build.scss.vendor.sass') || {},\n      level: 2\n    }\n  };\n\n  /**\n   * @name          constructor\n   * @type          Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(\n      __deepMerge(\n        {\n          id: 'build.scss',\n          name: 'Build Scss'\n        },\n        settings\n      )\n    );\n  }\n\n  /**\n   * @name            _run\n   * @type            Function\n   * @private\n   *\n   * This method is the one that will be called once you call ```run```.\n   * The params passed are processed by the ```run``` parent method so you can\n   * confidently trust them.\n   * You MUST return an SPromise instance so that the spawned process can be\n   * managed automatically in the parent ```run``` method.\n   *\n   * @param       {Object}        argsObj         The object of passed arguments\n   * @param       {Object}        [settings={}]     The passed settings object\n   * @return      {SPromise}                      An SPromise instance through which the parent method can register for events like \"success\", \"log\", etc...\n   *\n   * @since       2.0.0\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  _run(argsObj, settings = {}) {\n    return new __SPromise(\n      async function (resolve, reject, trigger, cancel) {\n        const stream = new __SBuildScssActionsStream({});\n        const streamPromise = stream.start(argsObj);\n        __SPromise.pipe(streamPromise, this);\n        const res = await streamPromise;\n        resolve(res.streamObj.data);\n      },\n      {\n        id: 'cli.build.scss'\n      }\n    ).start();\n  }\n};\n"]}
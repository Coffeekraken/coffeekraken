{"version":3,"sources":["SJestOutputReporter.js"],"names":["__getFilename","require","__packageRoot","__highlight","highlight","SJestOutputReporter","globalConfig","options","_globalConfig","_options","metas","vars","console","log","estimatedTime","obj","path","replace","result","numFailingTests","testResults","forEach","resObj","status","title","contexts","resultObj","failureMessage","testFilePath","lines","split","map","line","i","trim","slice","join","titleBg","numFailedTests","numTotalTests","numPassedTests","module","exports"],"mappings":"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","sourcesContent":["const __getFilename = require('../fs/filename');\nconst __packageRoot = require('../path/packageRoot');\nconst __highlight = require('cli-highlight').highlight;\n\n// my-custom-reporter.js\nclass SJestOutputReporter {\n  constructor(globalConfig, options) {\n    this._globalConfig = globalConfig;\n    this._options = options;\n  }\n\n  onRunStart(metas, vars) {\n    console.log(\n      `<bgYellow><black> Starting tests </black></bgYellow> estimated time: <yellow>${vars.estimatedTime}s</yellow>`\n    );\n  }\n\n  onTestStart(obj) {\n    console.log(\n      `#temp #mb:0 <yellow>│</yellow> <bgCyan> ${__getFilename(\n        obj.path\n      )} </bgCyan> ${obj.path.replace(`${__packageRoot()}/`, '')}`\n    );\n  }\n\n  onTestResult(obj, result) {\n    // console.log('test result', result);\n    if (result.numFailingTests === 0) {\n      console.log(\n        `<yellow>│</yellow> <bgGreen><black> ${__getFilename(\n          obj.path\n        )} </black></bgGreen> ${obj.path.replace(`${__packageRoot()}/`, '')}`\n      );\n    } else {\n      console.log(\n        `#mb:0 <yellow>│</yellow> <bgRed><black> ${__getFilename(\n          obj.path\n        )} </black></bgRed> ${obj.path.replace(`${__packageRoot()}/`, '')}`\n      );\n      console.log(`<yellow>│</yellow>`);\n      result.testResults.forEach((resObj) => {\n        if (resObj.status === 'passed') {\n          console.log(\n            `<yellow>│</yellow> <bgGreen><black> Passed </black></bgGreen> ${resObj.title}`\n          );\n        } else if (resObj.status === 'failed') {\n          console.log(\n            `<yellow>│</yellow> <bgRed><black> Failed </black></bgRed> <red>${resObj.title}</red>`\n          );\n        }\n      });\n    }\n  }\n\n  onRunComplete(contexts, result) {\n    result.testResults.forEach((resultObj) => {\n      if (resultObj.failureMessage) {\n        console.log(\n          `<bgRed><black> ${resultObj.testFilePath.replace(\n            `${__packageRoot()}/`,\n            ''\n          )} </black></bgRed>`\n        );\n\n        const lines = resultObj.failureMessage.split('\\n').map((line, i) => {\n          if (i === 0) {\n            return `<yellow>${line}</yellow>`;\n          } else if (line.trim().slice(0, 8) === 'Expected') {\n            return `<green>${line}</green>`;\n          } else if (line.trim().slice(0, 8) === 'Received') {\n            return `<red>${line}</red>`;\n          } else if (line.trim().slice(0, 3) === 'at ') {\n            return `<cyan>${line}</cyan>`;\n          }\n          return line;\n        });\n        console.log(`<white>${lines.join('\\n')}\\n</white>`);\n      }\n    });\n\n    const titleBg = result.numFailedTests > 0 ? 'bgRed' : 'bgGreen';\n\n    console.log(`<${titleBg}><black> Stats </black></${titleBg}>\\n`);\n    console.log(\n      `- <yellow>total</yellow>  tests: <yellow>${result.numTotalTests}</yellow>`\n    );\n    console.log(\n      `- <green>passed</green> tests: <green>${result.numPassedTests}</green>`\n    );\n    console.log(\n      `- <red>failed</red> tests: <red>${result.numFailedTests}</red>`\n    );\n  }\n}\n\nmodule.exports = SJestOutputReporter;\n"]}
{"version":3,"sources":["registerProcess.js"],"names":["__uniquid","require","module","exports","registerProcess","pro","name","global","_registeredProcesses","on"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,kBAAD,CAAzB;AAEA;;;;;;;;;;;;;;;;;;;;AAkBAC,MAAM,CAACC,OAAP,GAAiB,SAASC,eAAT,CAAyBC,GAAzB,EAA8BC,IAA9B,EAAkD;AAAA,MAApBA,IAAoB;AAApBA,IAAAA,IAAoB,GAAbN,SAAS,EAAI;AAAA;;AACjE,MAAI,CAACO,MAAM,CAACC,oBAAZ,EAAkCD,MAAM,CAACC,oBAAP,GAA8B,EAA9B;AAClCD,EAAAA,MAAM,CAACC,oBAAP,CAA4BF,IAA5B,IAAoCD,GAApC;;AACA,MAAIA,GAAG,IAAI,OAAOA,GAAG,CAACI,EAAX,KAAkB,UAA7B,EAAyC;AACvCJ,IAAAA,GAAG,CAACI,EAAJ,CAAO,OAAP,EAAgB,MAAM;AACpB,aAAOF,MAAM,CAACC,oBAAP,CAA4BF,IAA5B,CAAP;AACD,KAFD;AAGD;AACF,CARD","sourcesContent":["const __uniquid = require('../string/uniqid');\n\n/**\n * @name              registerProcess\n * @namespace           node.process\n * @type              Function\n *\n * This function register a (child) process in a global stack.\n * You can access these registered processes using the \"getRegisteredProcesses\" function.\n *\n * @param       {Process}         pro         The process you want to register\n * @param       {String}Â      [name=null]       A specific name for your process. By default a uniqid will be generated\n *\n * @example         js\n * const registerProcess = require('@coffeekraken/sugar/node/process/registerProcess');\n * registerProcess(childProcess.exec('ls -la'));\n *\n * @since       2.0.0\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = function registerProcess(pro, name = __uniquid()) {\n  if (!global._registeredProcesses) global._registeredProcesses = {};\n  global._registeredProcesses[name] = pro;\n  if (pro && typeof pro.on === 'function') {\n    pro.on('close', () => {\n      delete global._registeredProcesses[name];\n    });\n  }\n};\n"]}
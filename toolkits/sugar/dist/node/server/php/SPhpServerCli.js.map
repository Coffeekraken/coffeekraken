{"version":3,"sources":["SPhpServerCli.js"],"names":["__SCli","require","__packageRoot","__sugarConfig","module","exports","settings","argsObj","includeAllArgs","log","_settings","pro","setTimeout","runningArgsObj","hostname","port","rootDir","type","alias","description","default","level","process","cwd","router","interactive","config","noini","define","extended","file","help","information","lint","modules","run","begin","runLine","fileLine","end","hide","color","version","stripped","zend"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,gBAAD,CAAtB;;AACA,IAAMC,aAAa,GAAGD,OAAO,CAAC,wBAAD,CAA7B;;AACA,IAAME,aAAa,GAAGF,OAAO,CAAC,oBAAD,CAA7B;AAEA;;;;;;;;;;;;;AAWAG,MAAM,CAACC,OAAP;AAAA;;AAAA;;AACE;;;;;;;;;;AAWA;;;;;;;;;;AAyKA;;;;;;;;;AASA,yBAAYC,QAAZ,EAA2B;AAAA,QAAfA,QAAe;AAAfA,MAAAA,QAAe,GAAJ,EAAI;AAAA;;AAAA;;AAAA,6BACnBA,QADmB;AAE1B;AAED;;;;;;;;;;;;AAlMF;AAAA;AAAA,wBA6MIC,OA7MJ,EA8MIC,cA9MJ,EA+MIC,GA/MJ,EAgNI;AAAA,UAHAF,OAGA;AAHAA,QAAAA,OAGA,GAHU,KAAKG,SAAL,CAAeH,OAGzB;AAAA;;AAAA,UAFAC,cAEA;AAFAA,QAAAA,cAEA,GAFiB,KAAKE,SAAL,CAAeF,cAEhC;AAAA;;AAAA,UADAC,GACA;AADAA,QAAAA,GACA,GADM,IACN;AAAA;;AACA,UAAME,GAAG,0EAAaJ,OAAb,EAAsBC,cAAtB,CAAT;;AACA,UAAI,CAACC,GAAL,EAAU,OAAOE,GAAP;AAEVC,MAAAA,UAAU,CAAC,MAAM;AACf,aAAKH,GAAL,yFAEqB,KAAKI,cAAL,CAAoBC,QAFzC,iDAGqB,KAAKD,cAAL,CAAoBE,IAHzC,iDAIqB,KAAKF,cAAL,CAAoBG,OAJzC,sDAK0B,KAAKH,cAAL,CAAoBC,QAL9C,cAK0D,KAAKD,cAAL,CAAoBE,IAL9E;AAMD,OAPS,CAAV;AAQA,aAAOJ,GAAP;AACD;AA7NH;;AAAA;AAAA,EAA6CX,MAA7C,sCAUmB,uDAVnB,4CAqByB;AACrBc,EAAAA,QAAQ,EAAE;AACRG,IAAAA,IAAI,EAAE,QADE;AAERC,IAAAA,KAAK,EAAE,GAFC;AAGRC,IAAAA,WAAW,EAAE,iBAHL;AAIRC,IAAAA,OAAO,EAAEjB,aAAa,CAAC,cAAD,CAAb,IAAiC,WAJlC;AAKRkB,IAAAA,KAAK,EAAE;AALC,GADW;AAQrBN,EAAAA,IAAI,EAAE;AACJE,IAAAA,IAAI,EAAE,QADF;AAEJC,IAAAA,KAAK,EAAE,GAFH;AAGJC,IAAAA,WAAW,EAAE,aAHT;AAIJC,IAAAA,OAAO,EAAEjB,aAAa,CAAC,UAAD,CAAb,IAA6B,IAJlC;AAKJkB,IAAAA,KAAK,EAAE;AALH,GARe;AAerBL,EAAAA,OAAO,EAAE;AACPC,IAAAA,IAAI,EAAE,QADC;AAEPE,IAAAA,WAAW,EAAE,uBAFN;AAGPC,IAAAA,OAAO,EAAEjB,aAAa,CAAC,aAAD,CAAb,IAAgCD,aAAa,CAACoB,OAAO,CAACC,GAAR,EAAD,CAH/C;AAIPF,IAAAA,KAAK,EAAE;AAJA,GAfY;AAqBrBG,EAAAA,MAAM,EAAE;AACNP,IAAAA,IAAI,EAAE,QADA;AAENE,IAAAA,WAAW,EAAE,eAFP;AAGNC,IAAAA,OAAO,EAAE,EAHH;AAINC,IAAAA,KAAK,EAAE;AAJD,GArBa;AA2BrBI,EAAAA,WAAW,EAAE;AACXR,IAAAA,IAAI,EAAE,SADK;AAEXC,IAAAA,KAAK,EAAE,GAFI;AAGXC,IAAAA,WAAW,EAAE,0BAHF;AAIXC,IAAAA,OAAO,EAAE,KAJE;AAKXC,IAAAA,KAAK,EAAE;AALI,GA3BQ;AAkCrBK,EAAAA,MAAM,EAAE;AACNT,IAAAA,IAAI,EAAE,QADA;AAENC,IAAAA,KAAK,EAAE,GAFD;AAGNC,IAAAA,WAAW,EAAE,yCAHP;AAINE,IAAAA,KAAK,EAAE;AAJD,GAlCa;AAwCrBM,EAAAA,KAAK,EAAE;AACLV,IAAAA,IAAI,EAAE,SADD;AAELC,IAAAA,KAAK,EAAE,GAFF;AAGLC,IAAAA,WAAW,EAAE,8BAHR;AAILC,IAAAA,OAAO,EAAE,KAJJ;AAKLC,IAAAA,KAAK,EAAE;AALF,GAxCc;AA+CrBO,EAAAA,MAAM,EAAE;AACNX,IAAAA,IAAI,EAAE,QADA;AAENC,IAAAA,KAAK,EAAE,GAFD;AAGNC,IAAAA,WAAW,yCAHL;AAINE,IAAAA,KAAK,EAAE;AAJD,GA/Ca;AAqDrBQ,EAAAA,QAAQ,EAAE;AACRZ,IAAAA,IAAI,EAAE,SADE;AAERC,IAAAA,KAAK,EAAE,GAFC;AAGRC,IAAAA,WAAW,EAAE,qDAHL;AAIRC,IAAAA,OAAO,EAAE,KAJD;AAKRC,IAAAA,KAAK,EAAE;AALC,GArDW;AA4DrBS,EAAAA,IAAI,EAAE;AACJb,IAAAA,IAAI,EAAE,QADF;AAEJC,IAAAA,KAAK,EAAE,GAFH;AAGJC,IAAAA,WAAW,EAAE,cAHT;AAIJE,IAAAA,KAAK,EAAE;AAJH,GA5De;AAkErBU,EAAAA,IAAI,EAAE;AACJd,IAAAA,IAAI,EAAE,SADF;AAEJC,IAAAA,KAAK,EAAE,GAFH;AAGJC,IAAAA,WAAW,EAAE,MAHT;AAIJC,IAAAA,OAAO,EAAE,KAJL;AAKJC,IAAAA,KAAK,EAAE;AALH,GAlEe;AAyErBW,EAAAA,WAAW,EAAE;AACXf,IAAAA,IAAI,EAAE,SADK;AAEXC,IAAAA,KAAK,EAAE,GAFI;AAGXC,IAAAA,WAAW,EAAE,iBAHF;AAIXC,IAAAA,OAAO,EAAE,KAJE;AAKXC,IAAAA,KAAK,EAAE;AALI,GAzEQ;AAgFrBY,EAAAA,IAAI,EAAE;AACJhB,IAAAA,IAAI,EAAE,SADF;AAEJC,IAAAA,KAAK,EAAE,GAFH;AAGJC,IAAAA,WAAW,EAAE,0BAHT;AAIJC,IAAAA,OAAO,EAAE,KAJL;AAKJC,IAAAA,KAAK,EAAE;AALH,GAhFe;AAuFrBa,EAAAA,OAAO,EAAE;AACPjB,IAAAA,IAAI,EAAE,SADC;AAEPC,IAAAA,KAAK,EAAE,GAFA;AAGPC,IAAAA,WAAW,EAAE,0BAHN;AAIPC,IAAAA,OAAO,EAAE,KAJF;AAKPC,IAAAA,KAAK,EAAE;AALA,GAvFY;AA8FrBc,EAAAA,GAAG,EAAE;AACHlB,IAAAA,IAAI,EAAE,QADH;AAEHC,IAAAA,KAAK,EAAE,GAFJ;AAGHC,IAAAA,WAAW,EAAE,iDAHV;AAIHE,IAAAA,KAAK,EAAE;AAJJ,GA9FgB;AAoGrBe,EAAAA,KAAK,EAAE;AACLnB,IAAAA,IAAI,EAAE,QADD;AAELC,IAAAA,KAAK,EAAE,GAFF;AAGLC,IAAAA,WAAW,EAAE,oDAHR;AAILE,IAAAA,KAAK,EAAE;AAJF,GApGc;AA0GrBgB,EAAAA,OAAO,EAAE;AACPpB,IAAAA,IAAI,EAAE,QADC;AAEPC,IAAAA,KAAK,EAAE,GAFA;AAGPC,IAAAA,WAAW,EAAE,qCAHN;AAIPE,IAAAA,KAAK,EAAE;AAJA,GA1GY;AAgHrBiB,EAAAA,QAAQ,EAAE;AACRrB,IAAAA,IAAI,EAAE,QADE;AAERC,IAAAA,KAAK,EAAE,GAFC;AAGRC,IAAAA,WAAW,EAAE,+CAHL;AAIRE,IAAAA,KAAK,EAAE;AAJC,GAhHW;AAsHrBkB,EAAAA,GAAG,EAAE;AACHtB,IAAAA,IAAI,EAAE,QADH;AAEHC,IAAAA,KAAK,EAAE,GAFJ;AAGHC,IAAAA,WAAW,EAAE,qDAHV;AAIHE,IAAAA,KAAK,EAAE;AAJJ,GAtHgB;AA4HrBmB,EAAAA,IAAI,EAAE;AACJvB,IAAAA,IAAI,EAAE,SADF;AAEJC,IAAAA,KAAK,EAAE,GAFH;AAGJC,IAAAA,WAAW,EAAE,+CAHT;AAIJC,IAAAA,OAAO,EAAE,KAJL;AAKJC,IAAAA,KAAK,EAAE;AALH,GA5He;AAmIrBoB,EAAAA,KAAK,EAAE;AACLxB,IAAAA,IAAI,EAAE,SADD;AAELC,IAAAA,KAAK,EAAE,GAFF;AAGLC,IAAAA,WAAW,EAAE,0CAHR;AAILC,IAAAA,OAAO,EAAE,KAJJ;AAKLC,IAAAA,KAAK,EAAE;AALF,GAnIc;AA0IrBqB,EAAAA,OAAO,EAAE;AACPzB,IAAAA,IAAI,EAAE,SADC;AAEPC,IAAAA,KAAK,EAAE,GAFA;AAGPC,IAAAA,WAAW,EAAE,gBAHN;AAIPC,IAAAA,OAAO,EAAE,KAJF;AAKPC,IAAAA,KAAK,EAAE;AALA,GA1IY;AAiJrBsB,EAAAA,QAAQ,EAAE;AACR1B,IAAAA,IAAI,EAAE,SADE;AAERC,IAAAA,KAAK,EAAE,GAFC;AAGRC,IAAAA,WAAW,EAAE,sDAHL;AAIRC,IAAAA,OAAO,EAAE,KAJD;AAKRC,IAAAA,KAAK,EAAE;AALC,GAjJW;AAwJrBuB,EAAAA,IAAI,EAAE;AACJ3B,IAAAA,IAAI,EAAE,QADF;AAEJC,IAAAA,KAAK,EAAE,GAFH;AAGJC,IAAAA,WAAW,EAAE,4BAHT;AAIJE,IAAAA,KAAK,EAAE;AAJH;AAxJe,CArBzB","sourcesContent":["const __SCli = require('../../cli/SCli');\nconst __packageRoot = require('../../path/packageRoot');\nconst __sugarConfig = require('../../config/sugar');\n\n/**\n * @name            SPhpServerCli\n * @namespace           node.server.php\n * @type            Class\n * @extends         SCli\n *\n * This class represent the PHP cli\n *\n * @since       2.0.0\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SPhpServerCli extends __SCli {\n  /**\n   * @name          command\n   * @type          String\n   * @static\n   *\n   * Store the command string\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static command = 'php -S %hostname:%port -t %rootDir %router %arguments';\n\n  /**\n   * @name          definitionObj\n   * @type          Object\n   * @static\n   *\n   * Store the definition object\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static definitionObj = {\n    hostname: {\n      type: 'String',\n      alias: 'o',\n      description: 'Server hostname',\n      default: __sugarConfig('php.hostname') || 'localhost',\n      level: 1\n    },\n    port: {\n      type: 'Number',\n      alias: 'p',\n      description: 'Server port',\n      default: __sugarConfig('php.port') || 8080,\n      level: 1\n    },\n    rootDir: {\n      type: 'String',\n      description: 'Server root directory',\n      default: __sugarConfig('php.rootDir') || __packageRoot(process.cwd()),\n      level: 1\n    },\n    router: {\n      type: 'String',\n      description: 'Server router',\n      default: '',\n      level: 1\n    },\n    interactive: {\n      type: 'Boolean',\n      alias: 'a',\n      description: 'Run as interactive shell',\n      default: false,\n      level: 2\n    },\n    config: {\n      type: 'String',\n      alias: 'c',\n      description: 'Look for php.ini file in this directory',\n      level: 2\n    },\n    noini: {\n      type: 'Boolean',\n      alias: 'n',\n      description: 'No php.ini file will be used',\n      default: false,\n      level: 2\n    },\n    define: {\n      type: 'String',\n      alias: 'd',\n      description: `Define INI entry foo with value 'bar'`,\n      level: 2\n    },\n    extended: {\n      type: 'Boolean',\n      alias: 'e',\n      description: 'Generate extended information for debugger/profiler',\n      default: false,\n      level: 2\n    },\n    file: {\n      type: 'String',\n      alias: 'f',\n      description: 'Parse <file>',\n      level: 2\n    },\n    help: {\n      type: 'Boolean',\n      alias: 'h',\n      description: 'Help',\n      default: false,\n      level: 2\n    },\n    information: {\n      type: 'Boolean',\n      alias: 'i',\n      description: 'PHP information',\n      default: false,\n      level: 2\n    },\n    lint: {\n      type: 'Boolean',\n      alias: 'l',\n      description: 'Syntax check only (lint)',\n      default: false,\n      level: 2\n    },\n    modules: {\n      type: 'Boolean',\n      alias: 'm',\n      description: 'Show compiled in modules',\n      default: false,\n      level: 2\n    },\n    run: {\n      type: 'String',\n      alias: 'r',\n      description: 'Run PHP <code> without using script tags <?..?>',\n      level: 2\n    },\n    begin: {\n      type: 'String',\n      alias: 'B',\n      description: 'Run PHP <begin_code> before processing input lines',\n      level: 2\n    },\n    runLine: {\n      type: 'String',\n      alias: 'R',\n      description: 'Run PHP <code\u0002 for every input line',\n      level: 2\n    },\n    fileLine: {\n      type: 'String',\n      alias: 'F',\n      description: 'Parse and execute <file> for every input line',\n      level: 2\n    },\n    end: {\n      type: 'String',\n      alias: 'E',\n      description: 'Run PHP <end_code> after processing all input lines',\n      level: 2\n    },\n    hide: {\n      type: 'Boolean',\n      alias: 'H',\n      description: 'Hide any passed arguments from external tools',\n      default: false,\n      level: 2\n    },\n    color: {\n      type: 'Boolean',\n      alias: 's',\n      description: 'Display colour syntax highlighted source',\n      default: false,\n      level: 2\n    },\n    version: {\n      type: 'Boolean',\n      alias: 'v',\n      description: 'Version number',\n      default: false,\n      level: 2\n    },\n    stripped: {\n      type: 'Boolean',\n      alias: 'w',\n      description: 'Display source with stripped comments and whitespace',\n      default: false,\n      level: 2\n    },\n    zend: {\n      type: 'String',\n      alias: 'z',\n      description: 'Load Zend extension <file>',\n      level: 2\n    }\n  };\n\n  /**\n   * @name          constructor\n   * @type          Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(settings);\n  }\n\n  /**\n   * @name            run\n   * @type            Function\n   * @override\n   *\n   * This method simply override the default one.\n   * For arguments documentation, check the SCli class.\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  run(\n    argsObj = this._settings.argsObj,\n    includeAllArgs = this._settings.includeAllArgs,\n    log = true\n  ) {\n    const pro = super.run(argsObj, includeAllArgs);\n    if (!log) return pro;\n\n    setTimeout(() => {\n      this.log(`<green>Your PHP server is up and running</green>:\n\nHostname       : <yellow>${this.runningArgsObj.hostname}</yellow>\nPort           : <yellow>${this.runningArgsObj.port}</yellow>\nRoot directory : <yellow>${this.runningArgsObj.rootDir}</yellow>\nURL            : <cyan>http://${this.runningArgsObj.hostname}:${this.runningArgsObj.port}</cyan>`);\n    });\n    return pro;\n  }\n};\n"]}
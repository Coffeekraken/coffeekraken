{"version":3,"sources":["SFsReadFileStreamAction.js"],"names":["__SActionsStreamAction","require","__fs","__isDirectory","__deepMerge","module","exports","settings","id","streamObj","_settings","resolve","reject","existsSync","input","Error","dataProperty","SFsReadFileStreamAction","definitionObj","default","readFileSync","type","required"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,sBAAsB,GAAGC,OAAO,CAAC,yBAAD,CAAtC;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,IAAD,CAApB;;AACA,MAAME,aAAa,GAAGF,OAAO,CAAC,oBAAD,CAA7B;;AACA,MAAMG,WAAW,GAAGH,OAAO,CAAC,wBAAD,CAA3B;AAEA;;;;;;;;;;;;;;;AAaAI,MAAM,CAACC,OAAP;AAAA;;AAAA;;AACE;;;;;;;;;;AAqBA;;;;;;;;;AASA,mCAAYC,QAAZ,EAA2B;AAAA,QAAfA,QAAe;AAAfA,MAAAA,QAAe,GAAJ,EAAI;AAAA;;AAAA;;AAAA,6BAEvBH,WAAW,CACT;AACEI,MAAAA,EAAE,EAAE;AADN,KADS,EAITD,QAJS,CAFY;AAS1B;AAED;;;;;;;;;;;AA1CF;AAAA;AAAA,wBAmDME,SAnDN,EAmDiBF,QAnDjB,EAmD4C;AAAA,UAA3BA,QAA2B;AAA3BA,QAAAA,QAA2B,GAAhB,KAAKG,SAAW;AAAA;;AACxC,8FAAiBD,SAAjB,EAA4B,OAAOE,OAAP,EAAgBC,MAAhB,KAA2B;AACrD,YAAI,CAACV,IAAI,CAACW,UAAL,CAAgBJ,SAAS,CAACK,KAA1B,CAAL,EACE,MAAM,IAAIC,KAAJ,CACH,yEAAwEN,SAAU,4BAD/E,CAAN;AAIF,YAAIN,aAAa,CAACM,SAAS,CAACK,KAAX,CAAjB,EAAoC,OAAOH,OAAO,CAACF,SAAD,CAAd;AAEpCA,QAAAA,SAAS,CACPA,SAAS,CAACO,YAAV,IACEC,uBAAuB,CAACC,aAAxB,CAAsCF,YAAtC,CAAmDG,OAF9C,CAAT,GAGIjB,IAAI,CAACkB,YAAL,CAAkBX,SAAS,CAACK,KAA5B,EAAmC,MAAnC,CAHJ;AAKAH,QAAAA,OAAO,CAACF,SAAD,CAAP;AACD,OAdD;AAeD;AAnEH;;AAAA;AAAA,EAAuDT,sBAAvD,4CAUyB;AACrBc,EAAAA,KAAK,EAAE;AACLO,IAAAA,IAAI,EAAE,QADD;AAELC,IAAAA,QAAQ,EAAE;AAFL,GADc;AAKrBN,EAAAA,YAAY,EAAE;AACZK,IAAAA,IAAI,EAAE,QADM;AAEZC,IAAAA,QAAQ,EAAE,KAFE;AAGZH,IAAAA,OAAO,EAAE;AAHG;AALO,CAVzB","sourcesContent":["const __SActionsStreamAction = require('../SActionsStreamAction');\nconst __fs = require('fs');\nconst __isDirectory = require('../../is/directory');\nconst __deepMerge = require('../../object/deepMerge');\n\n/**\n * @name            SFsReadFileStreamAction\n * @namespace           node.stream.actions\n * @type            Class\n * @extends         SActionsStreamAction\n *\n * This class is a stream action that allows you to read file(s) to the filesystem\n *\n * @param       {Object}Â        streamObj          The streamObj object with the properties described bellow:\n * @return      {Promise}                         A simple promise that will be resolved when the process is finished\n *\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SFsReadFileStreamAction extends __SActionsStreamAction {\n  /**\n   * @name            definitionObj\n   * @type             Object\n   * @static\n   *\n   * Store the definition object that specify the streamObj required properties, types, etc...\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static definitionObj = {\n    input: {\n      type: 'String',\n      required: true\n    },\n    dataProperty: {\n      type: 'String',\n      required: false,\n      default: 'data'\n    }\n  };\n\n  /**\n   * @name            constructor\n   * @type            Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(\n      __deepMerge(\n        {\n          id: 'actionStream.action.fs.readFile'\n        },\n        settings\n      )\n    );\n  }\n\n  /**\n   * @name          run\n   * @type          Function\n   * @async\n   *\n   * Override the base class run method\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  run(streamObj, settings = this._settings) {\n    return super.run(streamObj, async (resolve, reject) => {\n      if (!__fs.existsSync(streamObj.input))\n        throw new Error(\n          `The given \"<yellow>input</yellow>\" streamObj file path property \"<red>${streamObj}</red>\" does not exists...`\n        );\n\n      if (__isDirectory(streamObj.input)) return resolve(streamObj);\n\n      streamObj[\n        streamObj.dataProperty ||\n          SFsReadFileStreamAction.definitionObj.dataProperty.default\n      ] = __fs.readFileSync(streamObj.input, 'utf8');\n\n      resolve(streamObj);\n    });\n  }\n};\n"]}
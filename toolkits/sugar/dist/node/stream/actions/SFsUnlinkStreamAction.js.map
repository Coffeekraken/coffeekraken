{"version":3,"sources":["SFsUnlinkStreamAction.js"],"names":["__SActionsStreamAction","require","__rimraf","__deepMerge","module","exports","settings","id","streamObj","_settings","resolve","reject","sync","unlink","type","required"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,sBAAsB,GAAGC,OAAO,CAAC,yBAAD,CAAtC;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,QAAD,CAAxB;;AACA,IAAME,WAAW,GAAGF,OAAO,CAAC,wBAAD,CAA3B;AAEA;;;;;;;;;;;;;;;;;;AAgBAG,MAAM,CAACC,OAAP;AAAA;;AAAA;;AACE;;;;;;;;;;AAgBA;;;;;;;;;AASA,iCAAYC,QAAZ,EAA2B;AAAA,QAAfA,QAAe;AAAfA,MAAAA,QAAe,GAAJ,EAAI;AAAA;;AAAA;;AAAA,6BAEvBH,WAAW,CACT;AACEI,MAAAA,EAAE,EAAE;AADN,KADS,EAITD,QAJS,CAFY;AAS1B;AAED;;;;;;;;;;;AArCF;AAAA;AAAA,wBA8CME,SA9CN,EA8CiBF,QA9CjB,EA8C4C;AAAA,UAA3BA,QAA2B;AAA3BA,QAAAA,QAA2B,GAAhB,KAAKG,SAAW;AAAA;;AACxC,4FAAiBD,SAAjB;AAAA,qCAA4B,WAAOE,OAAP,EAAgBC,MAAhB,EAA2B;AACrDT,UAAAA,QAAQ,CAACU,IAAT,CAAcJ,SAAS,CAACK,MAAxB;;AACA,iBAAOL,SAAS,CAACK,MAAjB;AACAH,UAAAA,OAAO,CAACF,SAAD,CAAP;AACD,SAJD;;AAAA;AAAA;AAAA;AAAA;AAKD;AApDH;;AAAA;AAAA,EAAqDR,sBAArD,4CAUyB;AACrBa,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAE,QADA;AAENC,IAAAA,QAAQ,EAAE;AAFJ;AADa,CAVzB","sourcesContent":["const __SActionsStreamAction = require('../SActionsStreamAction');\nconst __rimraf = require('rimraf');\nconst __deepMerge = require('../../object/deepMerge');\n\n/**\n * @name            SFsUnlinkStreamAction\n * @namespace           node.stream.actions\n * @type            Class\n * @extends         SActionsStreamAction\n *\n * This class is an action that allows you to delete some files / folders depending on the \"unlink\" property of the streamObj.\n * You can specify some glob patterns if you want\n *\n * @param       {Object}Â        streamObj          The streamObj object with the properties described bellow:\n * @return      {Promise}                         A simple promise that will be resolved when the process is finished\n *\n * @see       https://www.npmjs.com/package/rimraf\n * @since     2.0.0\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nmodule.exports = class SFsUnlinkStreamAction extends __SActionsStreamAction {\n  /**\n   * @name            definitionObj\n   * @type             Object\n   * @static\n   *\n   * Store the definition object that specify the streamObj required properties, types, etc...\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  static definitionObj = {\n    unlink: {\n      type: 'String',\n      required: true\n    }\n  };\n\n  /**\n   * @name            constructor\n   * @type            Function\n   * @constructor\n   *\n   * Constructor\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  constructor(settings = {}) {\n    super(\n      __deepMerge(\n        {\n          id: 'actionStream.action.fs.unlink'\n        },\n        settings\n      )\n    );\n  }\n\n  /**\n   * @name          run\n   * @type          Function\n   * @async\n   *\n   * Override the base class run method\n   *\n   * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n   */\n  run(streamObj, settings = this._settings) {\n    return super.run(streamObj, async (resolve, reject) => {\n      __rimraf.sync(streamObj.unlink);\n      delete streamObj.unlink;\n      resolve(streamObj);\n    });\n  }\n};\n"]}
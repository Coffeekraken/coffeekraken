{
    "version": 3,
    "sources": [
        "detectInOutDirection.js"
    ],
    "names": [
        "detectInOutDirection",
        "$elm",
        "mouseEnterHandler",
        "mouseLeaveHandler",
        "promise",
        "__SPromise",
        "resolve",
        "reject",
        "trigger",
        "cancel",
        "e",
        "direction",
        "action",
        "addEventListener",
        "id",
        "on",
        "removeEventListener",
        "oldX",
        "oldY",
        "threshold",
        "document",
        "calculateDirection",
        "directionX",
        "directionY",
        "diffX",
        "diffY",
        "pageX",
        "pageY"
    ],
    "mappings": ";;;;;;;AAAA;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6Be,SAASA,oBAAT,CAA8BC,IAA9B,EAAoC;AACjD,MAAIC,iBAAJ,EAAuBC,iBAAvB;AAEA,MAAMC,OAAO,GAAG,IAAIC,iBAAJ,CACd,CAACC,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,EAA2BC,MAA3B,KAAsC;AACpCP,IAAAA,iBAAiB,GAAIQ,CAAD,IAAO;AACzBF,MAAAA,OAAO,CAAC,IAAD,EAAOG,SAAP,CAAP;AACAH,MAAAA,OAAO,CAAC,MAAD,EAAS;AACdI,QAAAA,MAAM,EAAE,IADM;AAEdD,QAAAA;AAFc,OAAT,CAAP;AAID,KAND;;AAOAR,IAAAA,iBAAiB,GAAIO,CAAD,IAAO;AACzBF,MAAAA,OAAO,CAAC,KAAD,EAAQG,SAAR,CAAP;AACAH,MAAAA,OAAO,CAAC,MAAD,EAAS;AACdI,QAAAA,MAAM,EAAE,KADM;AAEdD,QAAAA;AAFc,OAAT,CAAP;AAID,KAND,CARoC,CAepC;;;AACAV,IAAAA,IAAI,CAACY,gBAAL,CAAsB,YAAtB,EAAoCX,iBAApC;AACAD,IAAAA,IAAI,CAACY,gBAAL,CAAsB,YAAtB,EAAoCV,iBAApC;AACD,GAnBa,EAoBd;AACEW,IAAAA,EAAE,EAAE;AADN,GApBc,EAuBdC,EAvBc,CAuBX,SAvBW,EAuBA,MAAM;AACpBd,IAAAA,IAAI,CAACe,mBAAL,CAAyB,YAAzB,EAAuCd,iBAAvC;AACAD,IAAAA,IAAI,CAACe,mBAAL,CAAyB,YAAzB,EAAuCb,iBAAvC;AACD,GA1Be,CAAhB;AA2BA,SAAOC,OAAP;AACD;;AAED,IAAIa,IAAI,GAAG,CAAX;AAAA,IACEC,IAAI,GAAG,CADT;AAAA,IAEEC,SAAS,GAAG,CAFd;AAAA,IAGER,SAAS,GAAG,IAHd;AAIAS,QAAQ,CAACP,gBAAT,CAA0B,WAA1B,EAAwCH,CAAD,IAAO;AAC5CW,EAAAA,kBAAkB,CAACX,CAAD,CAAlB;AACD,CAFD;AAGAU,QAAQ,CAACP,gBAAT,CAA0B,YAA1B,EAAyCH,CAAD,IAAO;AAC7CW,EAAAA,kBAAkB,CAACX,CAAD,CAAlB;AACD,CAFD;;AAGA,SAASW,kBAAT,CAA4BX,CAA5B,EAA+B;AAC7B,MAAIY,UAAU,GAAG,CAAjB;AAAA,MACEC,UAAU,GAAG,CADf;AAAA,MAEEC,KAAK,GAAG,CAFV;AAAA,MAGEC,KAAK,GAAG,CAHV;;AAIA,MAAIf,CAAC,CAACgB,KAAF,GAAUT,IAAI,GAAGE,SAArB,EAAgC;AAC9BG,IAAAA,UAAU,GAAG,MAAb;AACAE,IAAAA,KAAK,GAAGP,IAAI,GAAGP,CAAC,CAACgB,KAAjB;AACAT,IAAAA,IAAI,GAAGP,CAAC,CAACgB,KAAT;AACD,GAJD,MAIO,IAAIhB,CAAC,CAACgB,KAAF,GAAUT,IAAI,GAAGE,SAArB,EAAgC;AACrCG,IAAAA,UAAU,GAAG,OAAb;AACAE,IAAAA,KAAK,GAAGd,CAAC,CAACgB,KAAF,GAAUT,IAAlB;AACAA,IAAAA,IAAI,GAAGP,CAAC,CAACgB,KAAT;AACD;;AACD,MAAIhB,CAAC,CAACiB,KAAF,GAAUT,IAAI,GAAGC,SAArB,EAAgC;AAC9BI,IAAAA,UAAU,GAAG,IAAb;AACAE,IAAAA,KAAK,GAAGP,IAAI,GAAGR,CAAC,CAACiB,KAAjB;AACAT,IAAAA,IAAI,GAAGR,CAAC,CAACiB,KAAT;AACD,GAJD,MAIO,IAAIjB,CAAC,CAACiB,KAAF,GAAUT,IAAI,GAAGC,SAArB,EAAgC;AACrCI,IAAAA,UAAU,GAAG,MAAb;AACAE,IAAAA,KAAK,GAAGf,CAAC,CAACiB,KAAF,GAAUT,IAAlB;AACAA,IAAAA,IAAI,GAAGR,CAAC,CAACiB,KAAT;AACD;;AACD,MAAIL,UAAU,IAAIC,UAAlB,EAA8B;AAC5BZ,IAAAA,SAAS,GAAGa,KAAK,GAAGC,KAAR,GAAgBH,UAAhB,GAA6BC,UAAzC;AACD,GAFD,MAEO,IAAID,UAAJ,EAAgB;AACrBX,IAAAA,SAAS,GAAGW,UAAZ;AACD,GAFM,MAEA,IAAIC,UAAJ,EAAgB;AACrBZ,IAAAA,SAAS,GAAGY,UAAZ;AACD,GAFM,MAEA;AACLZ,IAAAA,SAAS,GAAG,IAAZ;AACD;AACF",
    "sourcesContent": [
        "import __SPromise from '../promise/SPromise';\n\n/**\n * @name      detectInOutDirection\n * @namespace           sugar.js.dom\n * @type      Function\n *\n * Detect the mouse direction when entered on the passed element. The direction can be up, down, left or right and will be passed to the two callbacks available.\n * The first one is the `onIn` callback, and the second one is the `onOut`.\n *\n * @param    {HTMLElement}    $elm    The element to listen for mouseover and mouseout on\n * @param    {Function}    onIn    The onIn callback. The direction and the $elm will be passed to it\n * @param    {Function}    onOut    The onOut callback. The direction and the $elm will be passed to it\n * @return    {HTMLElement}    The $elm to maintain chainability\n *\n * @example     js\n * import detectInOutDirection from '@coffeekraken/sugar/js/dom/detectInOutDirection'\n * const detect = detectInOutDirection(myElm).in(direction => {\n *    // do something...\n * }).out(direction => {\n *    // do something...\n * }).then(value => {\n *    // do something\n *    console.log(value); // => { action: 'in', direction: 'up' };\n * });\n *\n * // cancel the detection process\n * detect.cancel();\n *\n * @author    Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)\n */\nexport default function detectInOutDirection($elm) {\n  let mouseEnterHandler, mouseLeaveHandler;\n\n  const promise = new __SPromise(\n    (resolve, reject, trigger, cancel) => {\n      mouseEnterHandler = (e) => {\n        trigger('in', direction);\n        trigger('then', {\n          action: 'in',\n          direction\n        });\n      };\n      mouseLeaveHandler = (e) => {\n        trigger('out', direction);\n        trigger('then', {\n          action: 'out',\n          direction\n        });\n      };\n      // detect when mouseenter/leave the element\n      $elm.addEventListener('mouseenter', mouseEnterHandler);\n      $elm.addEventListener('mouseleave', mouseLeaveHandler);\n    },\n    {\n      id: 'detectInOutDirection'\n    }\n  ).on('finally', () => {\n    $elm.removeEventListener('mouseenter', mouseEnterHandler);\n    $elm.removeEventListener('mouseleave', mouseLeaveHandler);\n  });\n  return promise;\n}\n\nlet oldX = 0,\n  oldY = 0,\n  threshold = 0,\n  direction = null;\ndocument.addEventListener('mousemove', (e) => {\n  calculateDirection(e);\n});\ndocument.addEventListener('touchstart', (e) => {\n  calculateDirection(e);\n});\nfunction calculateDirection(e) {\n  let directionX = 0,\n    directionY = 0,\n    diffX = 0,\n    diffY = 0;\n  if (e.pageX < oldX - threshold) {\n    directionX = 'left';\n    diffX = oldX - e.pageX;\n    oldX = e.pageX;\n  } else if (e.pageX > oldX + threshold) {\n    directionX = 'right';\n    diffX = e.pageX - oldX;\n    oldX = e.pageX;\n  }\n  if (e.pageY < oldY - threshold) {\n    directionY = 'up';\n    diffY = oldY - e.pageY;\n    oldY = e.pageY;\n  } else if (e.pageY > oldY + threshold) {\n    directionY = 'down';\n    diffY = e.pageY - oldY;\n    oldY = e.pageY;\n  }\n  if (directionX && directionY) {\n    direction = diffX > diffY ? directionX : directionY;\n  } else if (directionX) {\n    direction = directionX;\n  } else if (directionY) {\n    direction = directionY;\n  } else {\n    direction = null;\n  }\n}\n"
    ]
}
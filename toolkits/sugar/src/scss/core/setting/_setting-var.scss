/**
 * @name      setting-var
 * @namespace           scss.core.setting
 * @type    function
 *
 * Get a settings from the global settings stack and return it in var(...) format
 *
 * @param 				{String} 			$path 						The setting path wanted separated by dots
 * @param 				{String} 			[$context=s-context()] 		The context name to get the setting
 * @param 				{Mixed} 			[$default=null] 			The value to return if no value is found
 * @return 				{Mixed} 										The setting value
 *
 * @example       scss
 * .my-cool-element {
 *    color: Sugar.setting-var('typography.font-size');
 * }
 * // etc...
 *
 * @since       2.0.0
 * @author 			Olivier Bossel <olivier.bossel@gmail.com> (https://olivierbossel.com)
 */
@function setting-var($path, $context: $__current-context, $default: null) {
  $base_path: $path;
  @if $context == default {
    $context: null;
  }

  // check if has a component
  @if $context {
    $path: "contexts.#{$context}.#{$path}";
  }

  $var-name: var-name($path);
  $value: map-get($__settings, $path);
  @if not $value and $context {
    // try to get the value from the base component
    $value: setting($base_path, default, $default);
    $var-name: var-name($base_path);
  }

  // if no value
  @if not $value {
    @return $default;
  }

  // return the var statement
  @return unquote("var(#{$var-name})");

  // check if the variable is already in the generated ones
  // @if list-index($__generated-vars, $var-name) == null {

  // }

  // return the value
  @return $value;
}
